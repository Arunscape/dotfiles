ExtensionDropdown=function(a){var o=$(a.body),n=a.getElementById("items"),r=a.getElementById("searchResults"),s=a.getElementById("recentSites"),i=a.getElementById("favoriteSites"),l=a.getElementById("identitiesMenuItem"),c=a.getElementById("matchingSitesTopLevel"),t=a.getElementById("matchingSites"),u=a.getElementById("addCustomItems"),d=$("#panelContainer"),p=$("#topLevelContainer"),m=$("#allMatchingSitesMenuItem"),e=a.getElementById("allMatchingSitesItems"),g=$("#vaultMenuItem"),f=$("#addOmariaItems"),b=$("#allItems"),h=$("#groupLabel"),v=$("#backButton"),P=$("#debugconsole"),I=$("#encryptedExportMenuItem"),y=$("#wifiExportMenuItem"),E=$("#matchingSitesMenuItem"),L=$("#recentSitesMenuItem"),S=$("#favoriteSitesMenuItem"),_=$("#container"),x=$("#innerWrapper"),C=$("#searchInput"),T=$("#applicationsMenuItem"),w=$("#logoContainer"),M=$("#logoPartner"),k=null,D=!1,A=null,F=null,O=null,B=null,N=null,R=function(){LPPlatform.setDropdownPopoverSize(x.outerHeight(),x.outerWidth())},H=function(e){var t;e.outerHeight()>_.outerHeight()?t=e.outerHeight()-_.outerHeight()+_.outerHeight():e.outerHeight()<_.outerHeight()&&(t=x.outerHeight()),LPPlatform.setDropdownPopoverSize(t,e.outerWidth()+x.outerWidth())},z=null,V=null,U=null,K=null,G=null,W=null,Y=null,j=null,Z=null,X=null,q=null,Q=null,J=null,ee=!1,te=!1,ne=!1,ie=!1,oe=!1,ae={},re=null,se={},le=[],ce={},ue=function(e){if(h.empty(),e){var t=e.getName(),n=(t=t.replace(/\\/g," \\ ")).indexOf("\\",t.length/2);if(-1===n&&(n=t.lastIndexOf("\\")),0<n){var i=LPTools.createElement("div","textOverflowContainer groupLabel");i.appendChild(LPTools.createElement("span",null,t.substring(0,n))),h.append(LPTools.createElement("span","textTail","Â "+t.substring(n))),h.append(i),LPTools.setupMiddleEllipsis(h)}else h.append(LPTools.createElement("span","groupLabel",t));h.find(".groupLabel").attr("title",e.toString())}},de,pe;ce.GroupState=function(t){var n=LPTools.getNavIndex();this.pop=function(e){t.rebuildItems(null,e),e&&LPTools.setNavIndex(n),ue(t._model)}},ce.SearchState=function(){var e=new ce.CSSState("searchItem",{restoreKeyboardNav:!1});this.pop=function(){De(),e.pop()}},ce.TopLevelMatchingSitesState=function(e){var t=new ce.CSSState("matchingSites"),n=new ce.GroupState(e);this.pop=function(){n.pop(),t.pop()}},ce.CSSState=(de=o.attr("class"),pe=function(e){o.removeClass(de),o.addClass(e),de=e},function(e,t){var n=de;if(pe(e),LPTools.getOption(t,"applyKeyboardNav",!0)){var i=LPTools.getOption(t,"selectFirst",!1);LPTools.addKeyBoardNavigation($(".extensionMenuItem:visible"),{selectFirst:i})}this.pop=function(){ue(null),pe(n),LPTools.getOption(t,"restoreKeyboardNav",!0)&&LPTools.addKeyBoardNavigation($(".extensionMenuItem:visible"),{displayItems:0===le.length&&J?J.getItems():null}),t&&"function"==typeof t.onPop&&t.onPop()}});var me=function(){LPTools.parseUserSpecificMenu(a.getElementById("mainMenu"),LPProxy.getAccountClass()),LPProxy.isEnterpriseUser()&&$("#specialOfferMenuItem").hide(),$("#username, #optionsMenuUserName, #optionsViewUserName").text(bg.get("g_username"))},ge=function(){$("#container").LP_show(),he();var e=bg.get("LPContentScriptFeatures").ziggy,t=bg.get("LPContentScriptFeatures").omaria;ExtensionLicenseExpiration.initialize(),"Enterprise Admin"!==(N=LPProxy.getAccountClass())&&"Teams Admin"!==N||o.addClass("admin"),A=bg.get("g_premium_trial_exp_days"),F=bg.get("g_company_trial_exp_days"),O=bg.get("g_company_license_exp_days"),B=bg.get("g_company_renewalstatus"),k={isZiggySet:e,isOmarSet:t,showHelpText:e};var n=function(){fe(),xe(),t||L.detach().insertBefore("#toolsMenuItem"),Me(k),me(e),setTimeout(function(){ve()}),Je(),e||($("#mainMenu").addClass("showIcons"),be()),bg.sendLpImprove("openicondropdown")},i=LPPlatform.getExtensionDropdownDelay();0<=i?setTimeout(n,i):n()},fe=function(){_.addClass("loading")},be=function(){ExtensionLicenseExpiration.expiredCompanyStatusCheckerForPanelSize()?H(d):ExtensionLicenseExpiration.expiredPremiumStatusCheckerForPanelSize()?H(d):!bg.get("g_show_original_language_changed_notification")||ExtensionLicenseExpiration.expiredCompanyStatusCheckerForPanelSize()||ExtensionLicenseExpiration.expiredPremiumStatusCheckerForPanelSize()?R():d.load("extensionLanguageUpdate.html",function(){ExtensionLanguageUpdate.initialize(),H(d)}),_.addClass("initialized"),LPTools.addKeyBoardNavigation($(".extensionMenuItem:visible"),{displayItems:J?J.getItems():null}),C.focus()},he=function(){LPFeatures.updateFeatures({import:!0,noexport:!1,show_notes:!0,hideidentities:!1,show_formfills:!0})},ve=function(){if(LPProxy.initializeModel(),Ce(k),Ie(k),!te&&-1<bg.get("g_local_accts_version")){for(var e in te=!0,_.removeClass("loading"),se)se[e]();var t=C.val();t&&Ae(t)}else setTimeout(ve,15)},Pe=function(e,t){var t=t||{};return LPProxy.getPreference("showAcctsInGroups",!0)&&(e=LPProxy.assignItemsToGroups(e,!1),t.separateFavorites=!0),new Container(e,t)},Ie=function(e){e.isOmarSet?((U=new Container(LPProxy.getAllItems(),$.extend({},e,{omarItems:!0,trackAction:!0}))).setElement(n),q=new Container(LPProxy.getCustomNoteTemplates().map(function(e){return new AddCustomItemDisplay(e)}),$.extend({},e,{additionalItemClasses:"addOmariaItem",autoExpandSingleItem:!1,value:"Custom"})),Le(q.getItemCount()),Se()):((K=Pe(LPProxy.getSites(),e)).setElement(n),(W=Pe(LPProxy.getNotes(),e)).setElement(n),(Y=new Container(LPProxy.getFormFills(),e)).setElement(n),(j=new Container(LPProxy.getApplications(),e)).setElement(n)),ExtensionLicenseExpiration.premiumTrialExpiringStatusChecker()?ExtensionLicenseExpiration.showExpiration(N,"trial",A):ExtensionLicenseExpiration.premiumTrialExpiredStatusChecker()?ExtensionLicenseExpiration.showExpiration(N,"trial",A):ExtensionLicenseExpiration.companyTrialExpiringStatusChecker()?ExtensionLicenseExpiration.showExpiration(N,"trial",F):ExtensionLicenseExpiration.companyTrialExpiredStatusChecker()?ExtensionLicenseExpiration.showExpiration(N,"trial",F):ExtensionLicenseExpiration.companyLicenseExpiredStatusChecker()?ExtensionLicenseExpiration.showExpiration(N,"normal",O):ExtensionLicenseExpiration.companyLicenseExpiringStatusChecker()&&ExtensionLicenseExpiration.showExpiration(N,"normal",O,B),X=new Container(LPProxy.getAllItems(),$.extend({},e,{moreOptionsState:ce.SearchState,moreOptionsCallback:D?R:null})),"Enterprise Admin"===N||"Enterprise Role User"===N||"Teams Admin"===N||"Teams Role User"===N?($(".feature-omaria #optionsViewLogoutMenuItem, .feature-omaria #optionsMenuItemEnt").show(),$(".feature-omaria #logoutMenuItem, .feature-omaria #optionsMenuItem").hide()):($(".feature-omaria #optionsViewLogoutMenuItem, .feature-omaria #optionsMenuItemEnt").hide(),$(".feature-omaria #logoutMenuItem, .feature-omaria #optionsMenuItem").show())},ye=function(e){var t=["extensionMenuItem","omariaMenuItem"];e&&e.attrs&&e.attrs.class&&(t=t.concat(e.attrs.class));var n=$.extend({},e.attrs,{class:t}),i=LPTools.createElement("li",n);return i.appendChild(LPTools.createElement("i",e.icon+" menuIcon")),i.appendChild(LPTools.createElement("span","name",e.name)),e.addMoreButton&&i.appendChild(LPTools.createElement("div","more")),n.childView&&$(i).bind("click",et),e.onClick&&$(i).bind("click",e.onClick),i},Ee=function(e,t){switch(t&&U.applyFilter({showEmptyGroups:!1,func:function(e){return e instanceof GroupDisplay||e.getRecordType()===t}}),U.rebuildItems(n,!e.originalEvent.isTrusted),t){case"Account":qe(U,"Empty_Site_Omaria",Strings.translateString("You can save and fill usernames and passwords for any website or app."),Strings.translateString("Add a password"),t);break;case"Generic":qe(U,"Empty_Note_Omaria",Strings.translateString("Use a secure note to save important documents in your LastPass vault."),Strings.translateString("Add a secure note"),t);break;case"Address":qe(U,"Empty_Address_Omaria",Strings.translateString("Add an address to auto-fill your email, phone number, and other contact info."),Strings.translateString("Add an address"),t);break;case"Credit Card":qe(U,"Empty_Credit_Card_Omaria",Strings.translateString("Next time you go shopping, they'll be waiting!"),Strings.translateString("Add a payment card"),t);break;case"Bank Account":qe(U,"Empty_Bank_Account_Omaria",Strings.translateString("Save and fill your bank accounts securely on any device with LastPass."),Strings.translateString("Add a bank account"),t)}},Le=function(r){var s=LPProxy.getRecordConfig(),l=LPProxy.getAllModelTypes();f.empty(),$("#addItem").addClass("divider"),b.empty(),s.viewConfig.forEach(function(e){if(e.forEach(function(e){if("all"!==e){var a=LPProxy.getConfigViewObject(e);a.types.forEach(function(e){var t=LPProxy.getConfigTypeObject(e),n=bg.get("g_prefoverrides").noformfill?bg.get("g_prefoverrides").noformfill:[],i=LPProxy.getAllModelTypes().includes(t.recordType);if("cloud-apps"!==e&&"CloudApps"!==e&&(i||"Password"===e||!n.includes("0")&&!n.includes(t.enterprisePolicyId))){(a.default||l.includes(t.recordType))&&b.append(ye({attrs:{class:"omariaItem",childView:"omariaItems"},name:a.name,icon:s.icons[t.id],addMoreButton:!0,onClick:function(e){Ee(e,t.recordType)}}));var n=bg.get("g_prefoverrides").noformfill?bg.get("g_prefoverrides").noformfill:[];if("Password"===t.id||!n.includes("0")&&!n.includes(t.enterprisePolicyId)){var o=null;t.recordType===s.TYPE.Custom?0<r&&(o=ye({attrs:{class:"addOmariaItem",childView:"addCustomItems"},name:t.name,icon:s.icons[t.id],addMoreButton:!0,onClick:function(e){q.rebuildItems(u,!e.originalEvent.isTrusted)}})):o=ye({attrs:{class:"addOmariaItem"},name:t.name,icon:s.icons[t.id],onClick:function(){_e(t.recordType)}}),o&&f.append(o)}}})}}),e!==s.viewConfig[0]){if(!b[0].lastChild.classList.contains("omarSpacer")){var t=LPTools.createElement("li","omarSpacer");b.append(t)}var n=LPTools.createElement("li","omarSpacer");f.children().last().hasClass("omarSpacer")||f.append(n)}});var e=LPTools.createElement("li",{class:"extensionMenuItem addOmariaItem",value:"saveAll"},Strings.translateString("Save All Entered Data"));f.append(e),$('.addOmariaItem[value="saveAll"]').bind("click",function(){bg.lpevent("m_saed"),bg.get_selected_tab_data(null,function(e){bg.sendLpImprove("save_all_entered_data",{domain:bg.lp_gettld_url(e.url)})}),bg.saveall()})},Se=function(){var e=U.getItemChildren(),t=[];e.forEach(function(e){e._model.isFavorite()&&t.push(e._model.newDisplayObject())}),0<t.length?S.show():S.hide()},_e=function(e){bg.lpevent("m_add"),"Account"===e?bg.get_selected_tab_data_no_extension(null,function(e){ze({defaultData:{url:e?e.url:""}})}):Ve({defaultData:{notetype:e}})},xe=function(){P.LP_removeAttr("style"),I.LP_removeAttr("style"),y.LP_removeAttr("style"),T.LP_removeAttr("style"),bg.is_user_debug_enabled()&&P.show(),bg.have_binary()&&(I.show(),bg.LPPlatform.isWin()&&y.show()),LPTools.hasProperties(bg.get("g_applications"))&&T.show(),LPFeatures.allowNotes()?$("#notesMenuItem").show():$("#notesMenuItem").hide()},Ce=function(e){if(e.isOmarSet&&(l=a.getElementById("omarIdentitiesMenuItem")),V=LPProxy.getIdentities(),LPProxy.enableCurrentIdentity(V),0<V.length){Oe(z);for(var t=[],n=0,i=V.length;n<i;++n)t.push(V[n].newDisplayObject());var o;new IdentityContainer(t,e).initialize(a.getElementById("identities"))}else $(l).hide()},Te=function(e){return!0===ae[e]},we=function(e,t,n){var i=function(e){var t=bg.lpmdec(e.extra,!0),n=/Language:(.+)/.exec(t);return n&&1<n.length?n[1].substr(0,2):"en"},o=[],a=[],r,s;for(r=0,s=re.length;r<s;++r){var l=LPProxy.getNoteModel(re[r].aid);if(l){var c=i(l._data);-1===a.indexOf(c)&&a.push(c)}}for(r=0,s=re.length;r<s;++r){var u=re[r].aid;if("account"===re[r].type)o.push(new MatchingAccountDisplay(LPProxy.getSiteModel(u)));else if("note"===re[r].type){var d=LPProxy.getNoteModel(u);o.push(new MatchingNoteDisplay(d,1<a.length?i(d._data):null))}}(J=new Container(o,t)).setElement(e),J.rebuildItems()},Me=function(e){for(var t=0,n=(re=bg.getmatchingsites(!1,!0,!1)).length;t<n;++t)ae[re[t].aid]=!0;var i;e.isZiggySet||LPProxy.getPreference("toplevelmatchingsites",!1)?(o.addClass("matchingSitesIsVisible"),g.addClass("divider"),p.removeClass("hidden"),2<re.length?(g.addClass("topLevelMatchesShadow"),$("#allMatchingSiteCounter").text(re.length),m.removeClass("hidden")):(g.removeClass("topLevelMatchesShadow"),0===re.length&&(g.removeClass("divider"),o.removeClass("matchingSitesIsVisible"),p.addClass("hidden"),m.addClass("hidden"))),Be("topLevelMatchingSites",function(){we(c,$.extend({},e,{autoExpandSingleItem:!1,moreOptionsElement:a.getElementById("matchingSites"),moreOptionsState:ce.TopLevelMatchingSitesState,addLastClass:!1,trackAction:!0,sortFunction:VaultItemBaseDisplay.prototype.sortOmarMatchingItems}),!0),be()})()):(0===re.length?E.LP_removeAttr("style"):(E.show(),$("#matchingSiteCounter").text(re.length)),g.removeClass("divider"),g.removeClass("topLevelMatchesShadow"),o.removeClass("matchingSitesIsVisible"),p.addClass("hidden"))},ke=function(){var e=bg.getClearRecentTime(),t=bg.Preferences.get("recentUsedCount"),n=null;(n=bg.get("LPContentScriptFeatures").omaria?U.getItemChildren():K.getItemChildren().concat(W.getItemChildren())).sort(VaultItemBaseDisplay.prototype.sortByMostRecent);for(var i=[],o=0,a=n.length;o<a&&o<t;++o){var r=n[o];r.getLastTouchValue()>=e&&i.push(r._model.newDisplayObject())}0<i.length?(Q=new Container(i,$.extend({},k,{sortFunction:VaultItemBaseDisplay.prototype.sortByMostRecent,separateFavorites:!1}))).initialize(s):Ke(s)},$e=function(){var e=U.getItemChildren(),t;t=[],e.forEach(function(e){e._model.isFavorite()&&t.push(e._model.newDisplayObject())}),0<t.length?(G=new Container(t,k,{sortFunction:VaultItemBaseDisplay.prototype.sortByNameAsc})).initialize(i):Ke(i)},De=function(){LPTools.removeDOMChildren(r);for(var e=0,t=Z.length;e<t;++e){var n=Z[e],i=n.build(k);n.postBuild(i),r.appendChild(i)}if(0===Z.length){var o=LPTools.buildEmptyPlaceholder(Strings.translateString("No Matching Results"),"extensionSearchPlaceholder",r);r.appendChild(o)}LPTools.addKeyBoardNavigation(r.children,{rightArrowSelector:".moreItem",selectFirst:!0,displayItems:Z})},Ae=(Fe=null,function(e){0<e.length?(te&&(Z&&Z.forEach(function(e){e.hideInContextOptions()}),Z=X.getSearchResultItems(e),De()),ee||(Ge("search",{applyKeyboardNav:!1,onPop:function(){C.val("")}}),ee=!0,bg.sendLpImprove("search",{source:"icon"}))):Fe&&0<Fe.length&&(We(),ee=!1),Fe=e,D&&R()}),Fe,Oe=function(e){var t=Strings.translateString("Identities")+" ("+e.getName()+")",n=l.firstChild;3!==n.nodeType?(n=a.createTextNode(t),l.insertBefore(n,l.firstChild)):n.textContent=t},Be=function(i,o){return function(){var e=this,t=arguments,n=function(){o.apply(e,t)};te?n():se[i]=n}},Ne=function(e){e&&(e.stopPropagation(),e.preventDefault())},Re=function(e){for(var t=null;null!==e&&null===(t=e.getAttribute("childview"));)e=e.parentElement;return t},He=function(e){return(e=e||{}).saveOptions={source:"icon"},e},ze=function(e){bg.LPPlatform.openTabDialog("site",He(e))},Ve=function(e){bg.LPPlatform.openTabDialog("note",He(e))},Ue=function(e){bg.LPPlatform.openTabDialog("formFill",He(e))},Ke=function(e){e.appendChild(LPTools.createElement("li","extensionMenuItem none","None Available"))},Ge=function(e,t){le.push(new ce.CSSState(e,t)),D&&R()},We=function(e){var t=le.pop();t&&t.pop(e),D&&R()},Ye=dialogs.generatePassword,je=function(){Ye.getDialog().close(),v.unbind("click",je)},Ze=null,Xe=function(){!0===bg.get("LPContentScriptFeatures").better_generate_password_enabled&&(Ye=dialogs.betterGeneratePassword),Ye.open({preSetup:function(e){if(null===Ze){var t=Ye.parentElementID,n=e.options.hideHeader,i=e.dynamicHeight;Ze=function(){Ye.parentElementID=t,e.options.hideHeader=n,e.useDynamicHeignt(i)}}Ye.parentElementID="extensionDropdownGeneratePassword",e.options.hideHeader=!0,e.useDynamicHeignt(!1)},postSetup:function(e){ExtensionLicenseExpiration.expiredCompanyStatusCheckerForPanelSize()?LPPlatform.setDropdownPopoverSize(d.outerHeight(),d.outerWidth()+_.outerWidth()):ExtensionLicenseExpiration.expiredPremiumStatusCheckerForPanelSize()?LPPlatform.setDropdownPopoverSize(d.outerHeight(),d.outerWidth()+_.outerWidth()):LPPlatform.setDropdownPopoverSize(e.$element.outerHeight()+_.outerHeight(),_.outerWidth())},onClose:function(){We(),ExtensionLicenseExpiration.expiredCompanyStatusCheckerForPanelSize()?H(d):ExtensionLicenseExpiration.expiredPremiumStatusCheckerForPanelSize()?H(d):R()},onCopy:function(){LPPlatform.closePopup(!0)},saveOptions:{source:"icon"}}),v.unbind("click",je),v.bind("click",je)},qe=function(e,t,n,i,o){if(o=o||"Generic",e.isEmpty()){var a=LPTools.createElement("div","emptyView");a.appendChild(LPTools.createElement("img",{src:"images/vault_4.0/"+t+".png",class:"emptyViewIcon"})),a.appendChild(LPTools.createElement("h1","emptyViewText",n));var r=LPTools.createElement("input",{class:"addItem rbtn",type:"button",value:i,tabindex:-1});r.appendChild(LPTools.createElement("i","fa fa-trash")),a.appendChild(r),r.addEventListener("click",function(e){_e(o)}),LPTools.addKeyBoardNavigation($(r),{selectFirst:!0}),document.getElementById("items").appendChild(a)}},Qe=function(e,t,n){if(e.isEmpty()){var i=LPTools.createElement("div","emptyView");i.appendChild(LPTools.createElement("img",{src:"images/vault_4.0/"+t,class:"emptyViewIcon"})),i.appendChild(LPTools.createElement("h1","emptyViewText",n)),document.getElementById("items").appendChild(i)}},Je=function(){bg.LPPartner&&bg.LPPartner.getPartnerInfo&&bg.LPPartner.getPartnerInfo(function(e){e&&($(r).addClass("partner-logo"),M.attr("src",e.logoUrl).removeClass(e.class).addClass(e.class),w.show(),o.addClass("partner"),R())})};C.LP_addSearchHandlers("inputDialog",function(e){Ae(e)}),v.bind("click",We);var et=function(e){Ge(Re(e.target),{selectFirst:!e.originalEvent.isTrusted}),Ne(e)};$("[childview]").bind("click",et),$("#addSite").bind("click",function(e){bg.get_selected_tab_data_no_extension(null,function(e){bg.lpevent("m_add"),ze({defaultData:{url:e?e.url:""}}),LPPlatform.closePopup()}),e.stopPropagation()}),$("#saveAllEnteredData").bind("click",function(){bg.lpevent("m_saed"),bg.get_selected_tab_data(null,function(e){bg.sendLpImprove("save_all_entered_data",{domain:bg.lp_gettld_url(e.url)})}),bg.saveall()}),$("#addNote").bind("click",function(){bg.lpevent("m_addn"),Ve()}),$("#addFormFill").bind("click",function(){bg.lpevent("m_af"),Ue()}),$("#addCreditCard").bind("click",function(){bg.lpevent("m_af"),Ue({defaultData:{profiletype:FormFill.prototype.FORM_FILL_TYPE_CREDIT_CARD}})}),$("#clearForms").bind("click",function(){bg.lpevent("m_clrf"),bg.clearforms("icon")});var tt=null,nt,it,ot,at;$("#chooseProfile").bind("click",function(){dialogs.chooseProfile.open({preSetup:function(e){if(null===tt){var t=dialogs.chooseProfile.parentElementID,n=e.options.hideHeader;tt=function(){dialogs.chooseProfile.parentElementID=t,e.options.hideHeader=n,e.$element.css("min-height","")}}e.$element.css("min-height",0),dialogs.chooseProfile.parentElementID="chooseProfileCreditCard",e.options.hideHeader=!0},onClose:function(){We()},saveOptions:{source:"icon"}})}),$("#vaultMenuItem").bind("click",function(){bg.lpevent("m_ov"),bg.openvault()}),$("#sitesMenuItem").bind("click",Be("sites",function(e){K.rebuildItems(n,!e.originalEvent.isTrusted),Qe(K,"Empty_Site.png",Strings.translateString("Remember every password"))})),$("#formFillsMenuItem").bind("click",Be("formFills",function(e){Y.rebuildItems(n,!e.originalEvent.isTrusted),Qe(Y,"Empty_Form.png",Strings.translateString("Fill Every Form"))})),$("#applicationsMenuItem").bind("click",Be("applications",function(e){j.rebuildItems(n,!e.originalEvent.isTrusted),Qe(j,"Empty_Site.png",Strings.translateString("Remember every password"))})),$("#generateMenuItem").bind("click",Xe),$("#notesMenuItem").bind("click",Be("notes",function(e){W.rebuildItems(n,!e.originalEvent.isTrusted),Qe(W,"Empty_Note.png",Strings.translateString("Store Every Note"))})),$("#clearMostRecent").bind("click",function(){bg.clearrecent(),LPTools.removeDOMChildren(s),Ke(s)});var rt=Be("mostRecent",function(e){ne||(ke(),ne=!0),LPTools.addKeyBoardNavigation(s.children,{rightArrowSelector:".moreItem",selectFirst:!e.originalEvent.isTrusted,displayItems:Q?Q.getItems():null})});L.bind("click",rt);var st=Be("sites",function(e){bg.get("LPContentScriptFeatures").omaria&&!oe&&($e(),oe=!0,LPTools.addKeyBoardNavigation(i.children,{rightArrowSelector:".moreItem",selectFirst:!e.originalEvent.isTrusted,displayItems:G.getItems()}))});S.bind("click",st);var lt=Be("matchingSites",function(e){ie||(we(t,k),ie=!0),LPTools.addKeyBoardNavigation(a.getElementById("matchingSites").children,{rightArrowSelector:".moreItem",selectFirst:!e.originalEvent.isTrusted})});if(E.bind("click",lt),m.bind("click",lt),$("#prefMenuItem").bind("click",function(){bg.lpevent("m_op"),bg.openprefs()}),$("#helpMenuItem").bind("click",function(){bg.lpevent("m_oh"),bg.openhelp()}),$("#adminConsoleMenuItem").bind("click",function(){bg.lpevent("m_oec"),bg.openentconsole()}),$("#logoutMenuItem, #optionsViewLogoutMenuItem").bind("click",function(){bg.sendLpImprove("logout_clicked",{source:"icon"}),bg.lpevent("m_lo"),bg.loggedOut(!1,"menu")}),$("#challengeMenuItem").bind("click",function(){bg.lpevent("m_sec"),bg.openseccheck()}),$("#favoritesMenuItem").bind("click",function(){bg.lpevent("m_of"),bg.openfavorites(!1,"icon")}),$("#aboutMenuItem").bind("click",function(){bg.lpevent("m_abt"),bg.openabout()}),P.bind("click",function(){bg.lpevent("m_dbgcon"),bg.opendebugtab()}),$("#csvExportMenuItem").bind("click",function(){bg.lpevent("m_e"),bg.openexport()}),$("#formFillExportMenuItem").bind("click",function(){bg.lpevent("m_eff"),bg.formfillexport()}),I.bind("click",function(){bg.lpevent("m_elp"),bg.openlastpassexport()}),y.bind("click",function(){bg.lpevent("m_ewlan"),bg.wlanexport()}),$("#printSitesMenuItem").bind("click",function(){bg.lpevent("m_p"),bg.openprint(!1)}),$("#printNotesMenuItem").bind("click",function(){bg.lpevent("m_pn"),bg.openprint(!0)}),$("#refreshMenuItem").bind("click",function(){bg.lpevent("m_ref"),LPProxy.refreshSites()}),$("#clearCachMenuItem").bind("click",function(){bg.lpevent("m_cl"),bg.clearCache(!1,!0,!1)}),$("#myAccountMenuItem").bind("click",function(){bg.lpevent("m_mya"),bg.openmyaccount()}),$("#sessionsMenuItem").bind("click",function(){bg.lpevent("m_ses"),bg.opensessions()}),LPPlatform.addEventListener(window,"unload",function(){pt()}),o.on("click",".extensionMenuItem, .footer, .contextOptionsDropdown",function(){LPPlatform.closePopup()}),LPFeatures.allowGift()){var ct=$("#specialOfferMenuItem");ct.show(),ct.bind("click",function(){bg.openURL(LPProxy.getBaseURL()+"gift.php")})}$("#omarChallengeMenuItem").bind("click",function(){bg.lpevent("m_sec"),bg.openseccheck()}),$("#omarFavoritesMenuItem").bind("click",function(){bg.lpevent("m_of"),bg.openfavorites(!1,"icon")}),$("#omarPrefMenuItem").bind("click",function(){bg.lpevent("m_op"),bg.openprefs()}),$("#omarHelpMenuItem").bind("click",function(){bg.lpevent("m_oh"),bg.openhelp()}),$("#omarAboutMenuItem").bind("click",function(){bg.lpevent("m_abt"),bg.openabout()}),$("#omarRefreshMenuItem").bind("click",function(){bg.lpevent("m_ref"),LPProxy.refreshSites()}),$("#omarClearCachMenuItem").bind("click",function(){bg.lpevent("m_cl"),bg.clearCache(!1,!0,!1)}),$("#omarSessionsMenuItem").bind("click",function(){bg.lpevent("m_ses"),bg.opensessions()}),$("#safariMessageButton").bind("click",function(){bg.openURL("https://lastpass.com/safariAppExtension.php?source=dropdown"),LPPlatform.closePopup()}),Topics.get(Topics.REFRESH_DATA).subscribe(function(){ve()}),Topics.get(Topics.PUSH_STATE).subscribe(function(e){le.push(e)}),Topics.get(Topics.EDIT_SITE).subscribe(function(e){e.vaultItem=e.vaultItem.getID(),ze(e)}),Topics.get(Topics.EDIT_NOTE).subscribe(function(e){e.vaultItem=e.vaultItem.getID(),Ve(e)}),Topics.get(Topics.EDIT_FORM_FILL).subscribe(function(e){e.vaultItem=e.vaultItem.getID(),Ue(e)}),Topics.get(Topics.EDIT_APPLICATION).subscribe(function(e){e.vaultItem=e.vaultItem.getID(),bg.LPPlatform.openTabDialog("application",e)}),Topics.get(Topics.IDENTITY_ENABLE).subscribe(function(e){LPProxy.enableIdentity(e),z=e}),Topics.get(Topics.CONFIRM).subscribe(function(e){ut("confirmation",e)}),Topics.get(Topics.ERROR).subscribe(function(e){e&&ut("alert",{title:Strings.Vault.ERROR,text:e})}),Topics.get(Topics.REPROMPT).subscribe(function(e){ut("reprompt",{successCallback:e})}),Topics.get(Topics.LEFT_ARROW).subscribe(function(){LPTools.disableMouse(),We(!0)}),Topics.get(Topics.CLEAR_DATA).subscribe(function(){for(var e=le.length-1;-1<e;--e)le[e].pop();le=[],LPTools.setNavIndex(0),C.val(""),oe=ie=ne=te=ee=!1,ae={},se={},re=null,Ze&&Ze(),tt&&tt(),_.removeClass("initialized"),b.empty(),f.empty(),Dialog.prototype.closeAllDialogs(!0)}),Topics.get(Topics.INITIALIZED).subscribe(function(){Strings.translate(a.body),LPPlatform.setupDropdownImportMenu(_)});var ut=function(e,t){$("#container").LP_hide(),LPTools.removeKeyBoardNavigation(),t=$.extend(t,{onResize:function(e,t){LPPlatform.setDropdownPopoverSize(e,t)},onClose:function(){LPPlatform.closePopup()}}),LPDialog.openDialog(e,t)},dt,pt=function(){Topics.get(Topics.CLEAR_DATA).publish()},mt,gt=(ft=function(){bg.getData({context:"extensionDropdown",callback:function(){ge()}})},bt={},ht=function(e){LPPlatform.move(screenY-(e.screenY-bt.y),e.screenX-bt.x)},function(){D=!0,document.body.classList.add("quickSearch"),window.addEventListener("mousedown",function(e){e.target===document.getElementById("searchContainer")&&(bt.x=e.clientX,bt.y=e.clientY,window.addEventListener("mousemove",ht),e.preventDefault())}),window.addEventListener("mouseup",function(){window.removeEventListener("mousemove",ht)}),Topics.get(Topics.ESCAPE).subscribe(function(){LPPlatform.doClosePopup()}),Account.prototype.getDisplayClass=function(){return MatchingAccountDisplay},"undefined"!=typeof bg?ft():(Topics.get(Topics.INITIALIZED).subscribe(function(){ft()}),LPPlatform.initialize({context:"extensionDropdown",callback:ft}))}),ft,bt,ht;return{setup:ge,State:ce,isMatchingSite:Te,setGroupLabel:ue,open:function(){var e=bg.get("g_badgedata");if(e&&"notification"===e.cmd){switch(e.alerttype){case"duplicate":ut("duplicatePassword",{notification:e});break;case"weak":ut("weakPassword",{notification:e})}switch(e.type){case"error":ut("notification",{notification:bg.get("g_notification_data")});break;case"mpwchange":ut("securityNotice",{notification:bg.get("g_notification_data")});break;case"lpalert":ut("breachAlert",{notification:bg.get("g_notification_data")})}bg.clear_badge()}else e&&"migration"===e.cmd?(ut("migration",{notification:e}),bg.clear_badge()):ge()},openDialog:ut,reset:pt,setBigIcons:function(e){bg.set("g_bigicons",e)},openQuickSearch:gt,setSize:R}}(document);
//# sourceMappingURL=sourcemaps/extensionDropdown.js.map
