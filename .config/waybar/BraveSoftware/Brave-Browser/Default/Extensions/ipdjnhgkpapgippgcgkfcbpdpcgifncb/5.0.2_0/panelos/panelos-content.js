(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
'use strict';function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError('Cannot call a class as a function')}var _createClass=function(){function defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)descriptor=props[i],descriptor.enumerable=descriptor.enumerable,descriptor.configurable=!0,'value'in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),PosdConfig=function(){function PosdConfig(){_classCallCheck(this,PosdConfig)}return _createClass(PosdConfig,null,[{key:'CONFIG_PANELOS_VERSION',get:function get(){return'1.1.9'}},{key:'CONFIG_PANEL_ID',get:function get(){return 1}},{key:'CONFIG_PARTNER_ID',get:function get(){return 2}},{key:'CONFIG_DISTRIBUTOR_ID',get:function get(){return 2}},{key:'CONFIG_PANELBACKEND_ENDPOINT',get:function get(){return'https://pnldsk.adclarity.com:40443'}},{key:'CONFIG_PANELBACKEND_ENDPOINT_ULR_OUTTICKET',get:function get(){return'/tickets'}},{key:'CONFIG_PANELBACKEND_ENDPOINT_ULR_INSTALL_EVENT',get:function get(){return'/install'}},{key:'CONFIG_USE_COMPRESSION',get:function get(){return!0}},{key:'CONFIG_MARK_AD_CANDIDATES',get:function get(){return!1}},{key:'CONFIG_TARGET_URL_BY_CLICK_AVAILABLE',get:function get(){return!0}},{key:'CONFIG_ANALYTIC_INSTALL_EVENTS_TRACING_AVAILABLE',get:function get(){return!0}},{key:'CONFIG_ADBLOCK_INSPECTOR_AVAILABLE',get:function get(){return!0}},{key:'CONFIG_WAIT_AFTER_PAGE_LOADED_MS',get:function get(){return 5000}},{key:'CONFIG_ADS_CANDIDATES_DETECTION_CYCLE_INTERVAL_MS',get:function get(){return 60000}}]),PosdConfig}();module.exports=PosdConfig;

},{}],2:[function(require,module,exports){
"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)descriptor=props[i],descriptor.enumerable=descriptor.enumerable,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),PosdAdsCandidates=function(){function PosdAdsCandidates(a){_classCallCheck(this,PosdAdsCandidates),this.id=a,this.candidates=[]}return _createClass(PosdAdsCandidates,[{key:"ClearCandidates",value:function ClearCandidates(){this.candidates=[]}},{key:"AddCandidate",value:function AddCandidate(a){this.candidates.push(a)}},{key:"CandidatesCount",get:function get(){return this.candidates.length}},{key:"Candidates",get:function get(){return this.candidates}},{key:"Context",get:function get(){return this}}]),PosdAdsCandidates}();module.exports=PosdAdsCandidates;

},{}],3:[function(require,module,exports){
'use strict';var _createClass=function(){function defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)descriptor=props[i],descriptor.enumerable=descriptor.enumerable,descriptor.configurable=!0,'value'in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError('Cannot call a class as a function')}var PosdConfig=require('../config'),PosdCommon=require('../libs/Common'),PosdConst=require('../libs/Constants'),PosdSkinAds=require('./SkinAds'),PosdBannerAds=require('./BannerAds'),PosdHTML5Ads=require('./HTML5Ads');var PosdAdsManager=function(){function PosdAdsManager(a){_classCallCheck(this,PosdAdsManager),this.id=a,this.init=!1,this.cycleNumber=0,this.cycleStatus=PosdConst.ADS_DETECTION_CYCLE_PROCESS_STATUS_NOT_STARTED,this.SkinAds=new PosdSkinAds(a),this.BannerAds=new PosdBannerAds(a),this.HTML5Ads=new PosdHTML5Ads(a),this.adsCandidatesDetectedCallback=null,this.lastCycleStartTime=null,this.lastCycleEndTime=null,this.adsDetectionTimerId=null}return _createClass(PosdAdsManager,[{key:'GetSkinAdsCandidates',value:function GetSkinAdsCandidates(){return this.SkinAds.Candidates}},{key:'GetBannerCandidates',value:function GetBannerCandidates(){return this.BannerAds.Candidates}},{key:'GetHTML5Candidates',value:function GetHTML5Candidates(){return this.HTML5Ads.Candidates}},{key:'DetectAdsCandidates',value:function DetectAdsCandidates(a){this.adsCandidatesDetectedCallback=a,this.adsDetectionTimerId||(this.adsDetectionTimerId=setInterval(this.StartAdsCandidatesDetectionCycle.bind(this),PosdConfig.CONFIG_ADS_CANDIDATES_DETECTION_CYCLE_INTERVAL_MS)),this.StartAdsCandidatesDetectionCycle()}},{key:'StartAdsCandidatesDetectionCycle',value:function StartAdsCandidatesDetectionCycle(){this.cycleStatus==PosdConst.ADS_DETECTION_CYCLE_PROCESS_STATUS_ACTIVE?void 0:(void 0,this.cycleStatus=PosdConst.ADS_DETECTION_CYCLE_PROCESS_STATUS_ACTIVE,this.lastCycleStartTime=PosdCommon.GetCurrentTimestamp(),this.DetectSkinAdCandidates())}},{key:'FinishAdsCandidatesDetectionCycle',value:function FinishAdsCandidatesDetectionCycle(){this.lastCycleEndTime=PosdCommon.GetCurrentTimestamp(),this.cycleStatus=PosdConst.ADS_DETECTION_CYCLE_PROCESS_STATUS_FINISHED,void 0,this.cycleNumber=this.cycleNumber+1,this.adsCandidatesDetectedCallback&&this.adsCandidatesDetectedCallback()}},{key:'DetectSkinAdCandidates',value:function DetectSkinAdCandidates(){this.SkinAds.DetectCandidates(this.OnDetectedSkinAdsCandidates.bind(this))}},{key:'DetectBannerCandidates',value:function DetectBannerCandidates(){this.BannerAds.DetectCandidates(this.OnDetectedBannerCandidates.bind(this))}},{key:'DetectedHtml5Candidates',value:function DetectedHtml5Candidates(){this.HTML5Ads.DetectCandidates(this.OnDetectedHtml5Candidates.bind(this))}},{key:'OnDetectedSkinAdsCandidates',value:function OnDetectedSkinAdsCandidates(){setTimeout(this.DetectBannerCandidates.bind(this),500)}},{key:'OnDetectedBannerCandidates',value:function OnDetectedBannerCandidates(){setTimeout(this.DetectedHtml5Candidates.bind(this),500)}},{key:'OnDetectedHtml5Candidates',value:function OnDetectedHtml5Candidates(){setTimeout(this.FinishAdsCandidatesDetectionCycle.bind(this),500)}},{key:'Context',get:function get(){return this}},{key:'CycleNumber',get:function get(){return this.cycleNumber}}]),PosdAdsManager}();module.exports=PosdAdsManager;

},{"../config":1,"../libs/Common":15,"../libs/Constants":16,"./BannerAds":4,"./HTML5Ads":8,"./SkinAds":11}],4:[function(require,module,exports){
'use strict';var _createClass=function(){function defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)descriptor=props[i],descriptor.enumerable=descriptor.enumerable,descriptor.configurable=!0,'value'in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError('Cannot call a class as a function')}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return call&&('object'==typeof call||'function'==typeof call)?call:self}function _inherits(subClass,superClass){if('function'!=typeof superClass&&null!==superClass)throw new TypeError('Super expression must either be null or a function, not '+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var PosdConfig=require('../config'),PosdCommon=require('../libs/Common'),PosdBase64=require('../libs/base64'),PosdAdsCandidates=require('./AdsCandidates'),PosdFilterLists=require('./FilterLists');var PosdBannerAds=function(_PosdAdsCandidates){function PosdBannerAds(b){return _classCallCheck(this,PosdBannerAds),_possibleConstructorReturn(this,(PosdBannerAds.__proto__||Object.getPrototypeOf(PosdBannerAds)).call(this,b))}return _inherits(PosdBannerAds,_PosdAdsCandidates),_createClass(PosdBannerAds,[{key:'PushCandidate',value:function PushCandidate(b){var c={content:PosdBase64.encode(b)};this.AddCandidate(c)}},{key:'IsValidCandidateSize',value:function IsValidCandidateSize(b){return b&&70<b.width&&40<b.height&&1100>b.height}},{key:'SetBorderToCandidate',value:function SetBorderToCandidate(b){b&&PosdConfig.CONFIG_MARK_AD_CANDIDATES&&(b.style.cssText+='border: 6px solid red !important;')}},{key:'DetectCandidates',value:function DetectCandidates(b){if(void 0,this.ClearCandidates(),b){for(var c=PosdCommon.QuerySelectorAll(document,'A[href]:not([bis_size]) > img:not([bis_size])'),e=0;e<c.length;e++){var f=c[e],g=f.src.toLowerCase(),h=c[e].parentNode,j=h.href.toLowerCase(),k=!1;if(PosdCommon.SetSizeToElement(f),PosdFilterLists.IsBannerHrefInBlackList(j)||PosdFilterLists.IsBannerImgSrcInBlackList(g)||(PosdCommon.IsUrl(g)&&!PosdCommon.IsUrlFromHost(document.location.host,g)&&PosdCommon.IsUrl(j)&&!PosdCommon.IsUrlFromHost(document.location.host,j)?k=!0:(PosdFilterLists.IsUrlHasWhiteListKeyWords(g)||PosdFilterLists.IsUrlHasWhiteListKeyWords(j))&&(k=!0)),k){var l=f.getBoundingClientRect();this.IsValidCandidateSize(l)&&(this.SetBorderToCandidate(f),PosdCommon.SetSizeToElement(h),void 0,this.PushCandidate(h.outerHTML))}}for(var d=PosdCommon.QuerySelectorAll(document,'img[onclick][onload][src]:not([bis_size])'),_e=0;_e<d.length;_e++){var f=d[_e],g=f.src.toLowerCase();if(!PosdFilterLists.IsBannerImgSrcInBlackList(g)&&(PosdCommon.IsUrl(g)&&!PosdCommon.IsUrlFromHost(document.location.host,g)||PosdFilterLists.IsUrlHasWhiteListKeyWords(g))){var h=f.getBoundingClientRect();this.IsValidCandidateSize(h)&&(this.SetBorderToCandidate(f),PosdCommon.SetSizeToElement(f),void 0,this.PushCandidate(f.outerHTML))}}void 0,b()}}}]),PosdBannerAds}(PosdAdsCandidates);module.exports=PosdBannerAds;

},{"../config":1,"../libs/Common":15,"../libs/base64":18,"./AdsCandidates":2,"./FilterLists":6}],5:[function(require,module,exports){
'use strict';var _createClass=function(){function defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)descriptor=props[i],descriptor.enumerable=descriptor.enumerable,descriptor.configurable=!0,'value'in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError('Cannot call a class as a function')}var PosdConst=require('../libs/Constants'),PosdMessage=require('../libs/Message');var PosdContentIOManager=function(){function PosdContentIOManager(a){_classCallCheck(this,PosdContentIOManager),this.id=a,this.init=!1,this.onGotPanelListIdCallback=null}return _createClass(PosdContentIOManager,[{key:'onInitMesSend',value:function onInitMesSend(a){a&&a.panellistid&&a.tabId&&this.onGotPanelListIdCallback&&this.onGotPanelListIdCallback(a.panellistid,a.tabId)}},{key:'SendTicket',value:function SendTicket(a){var b=PosdMessage.EmptyMessage;b.type=PosdConst.MESSAGE_TYPE_OUT_TICKET,b.from=this.id,b.to='bg',b.content=a,chrome.extension.sendMessage(b,this.onTicketSend.bind(this))}},{key:'onTicketSend',value:function onTicketSend(a){a&&a.status}}],[{key:'SendInitMes',value:function SendInitMes(a){var b=PosdMessage.EmptyMessage;b.type=PosdConst.MESSAGE_TYPE_INITIALIZATION,b.to='bg',b.content='init',chrome.extension.sendMessage(b,function(c){c&&c.panellistid&&c.tabId&&a&&a(c.panellistid,c.tabId)})}}]),PosdContentIOManager}();module.exports=PosdContentIOManager;

},{"../libs/Constants":16,"../libs/Message":17}],6:[function(require,module,exports){
"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)descriptor=props[i],descriptor.enumerable=descriptor.enumerable,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),PosdFilterLists=function(){function PosdFilterLists(){_classCallCheck(this,PosdFilterLists)}return _createClass(PosdFilterLists,null,[{key:"IsInFilterList",value:function IsInFilterList(a,b){for(var c=!1,d=0;d<a.length&&!c;d++)-1!=b.indexOf(a[d])&&(c=!0);return c}},{key:"IsBannerImgSrcInBlackList",value:function IsBannerImgSrcInBlackList(a){return PosdFilterLists.IsInFilterList(PosdFilterLists.BlackListBannerImgSrc,a)}},{key:"IsBannerHrefInBlackList",value:function IsBannerHrefInBlackList(a){return PosdFilterLists.IsInFilterList(PosdFilterLists.BlackListBannerHref,a)}},{key:"IsIframeSrcInBlackList",value:function IsIframeSrcInBlackList(a){return PosdFilterLists.IsInFilterList(PosdFilterLists.BlackListIframeSrc,a)}},{key:"IsIframeIdInBlackList",value:function IsIframeIdInBlackList(a){return PosdFilterLists.IsInFilterList(PosdFilterLists.BlackListIframeId,a)}},{key:"IsTargetUrlInBlackList",value:function IsTargetUrlInBlackList(a){return PosdFilterLists.IsInFilterList(PosdFilterLists.BlackListTargetUrl,a)}},{key:"IsUrlHasWhiteListKeyWords",value:function IsUrlHasWhiteListKeyWords(a){return PosdFilterLists.IsInFilterList(PosdFilterLists.WhiteListCandidatesUrlKeyWords,a)}},{key:"BlackListBannerImgSrc",get:function get(){return[".files.wordpress.com/",".outlook.office.net/",".wikimedia.org/"]}},{key:"BlackListBannerHref",get:function get(){return["//play.google.com/store/apps/","//itunes.apple.com/app/","//www.youtube.com/watch","//zoom.us/"]}},{key:"BlackListIframeSrc",get:function get(){return["//facebook.com/","//www.facebook.com/","twitter.com/","//youtube.com/","//www.youtube.com/","youtube-nocookie.com/embed/","//vk.com/","//www.vk.com/","//linkedin.com/","//www.linkedin.com/","//instagram.com/","//www.instagram.com/","//www.google.com/recaptcha/api2/","//hangouts.google.com/webchat/","//www.google.com/calendar/","//www.google.com/maps/embed","spotify.com/","soundcloud.com/","//player.vimeo.com/","//disqus.com/","//tgwidget.com/","//js.driftt.com/","friends2follow.com","/widget/","//video.bigmir.net/","blogger.com","//smartlock.google.com/","//keep.google.com/"]}},{key:"BlackListIframeId",get:function get(){return["twitter-widget-","cello__trello-board__"]}},{key:"BlackListTargetUrl",get:function get(){return["adssettings.google.com/whythisad?reasons="]}},{key:"WhiteListCandidatesUrlKeyWords",get:function get(){return["/lynad/","/bannerad/","/banners.","/ad/","/webads/","/adserver/","ad-sys.","sameliuk"]}}]),PosdFilterLists}();module.exports=PosdFilterLists;

},{}],7:[function(require,module,exports){
'use strict';var _createClass=function(){function defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)descriptor=props[i],descriptor.enumerable=descriptor.enumerable,descriptor.configurable=!0,'value'in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError('Cannot call a class as a function')}var PosdBase64=require('../libs/base64'),PosdCommon=require('../libs/Common'),PosdMessage=require('../libs/Message'),PosdConst=require('../libs/Constants'),PosdIframesIO=require('./IframesIO'),PosdTargetUrlDetector=require('./TargetUrlDetector');var PosdFrameContent=function(){function PosdFrameContent(){_classCallCheck(this,PosdFrameContent),this.id=null,this.init=!1,this.finalFrame=!1,this.activated=!1,this.activationCheckTimer=null,this.contentSenderTimer=null,this.iframeContent='',this.IframesIO=null,this.TargetUrlDetector=null}return _createClass(PosdFrameContent,[{key:'Init',value:function Init(){setTimeout(this.SendInitMessage.bind(this),800)}},{key:'SendInitMessage',value:function SendInitMessage(){var a={inputsAmount:this.GetInputsAmount(),hasRedirect:this.HasRedirect()},b=PosdMessage.EmptyMessage;b.type=PosdConst.MESSAGE_TYPE_IFRAME_INITIALIZATION,b.from=this.id,b.to='bg',b.content=a,chrome.extension.sendMessage(b,this.onGotInitMesResponse.bind(this))}},{key:'GetInputsAmount',value:function GetInputsAmount(){var a=PosdCommon.QuerySelectorAll(document,'input'),b=0;return a&&a.length&&a.forEach(function(c){var d=c.getBoundingClientRect();0<d.width&&0<d.height&&(b=b+1)}),b}},{key:'HasRedirect',value:function HasRedirect(){for(var d,a=!1,b=document.querySelectorAll('iframe[onload]'),c=0;c<b.length&&!a;c++)d=b[c].getAttribute('onload'),d&&d.length&&d.includes('.location.replace')&&(a=!0);if(!a)for(var f,_c=document.querySelectorAll('script'),d=0;d<_c.length&&!a;d++)f=_c[d].innerHTML,f.length&&f.includes('.location.replace')&&(a=!0);return a}},{key:'onGotInitMesResponse',value:function onGotInitMesResponse(a){a.status&&'ok'===a.status&&PosdMessage.IsValid(a.mes)?!this.init&&(this.init=!0,this.id='fr_'+a.mes.content.frameId,void 0,this.IframesIO=new PosdIframesIO(this.id),this.IframesIO.Init(!1,null),this.IframesIO.onGotContentMesCallback=this.onGotContentMes.bind(this),this.TargetUrlDetector=new PosdTargetUrlDetector(this.id),this.TargetUrlDetector.Init(this.IframesIO),setTimeout(this.SetBisId.bind(this),500),this.SetBisId(),this.InjectJs()):void 0}},{key:'onGotContentMes',value:function onGotContentMes(){void 0,this.onGotActivationMes()}},{key:'onGotActivationMes',value:function onGotActivationMes(){this.activationCheckTimer&&(clearInterval(this.activationCheckTimer),this.activationCheckTimer=null);var a=PosdCommon.QuerySelectorAll(document,'iframe,frame');void 0,a.length?this.IframesIO.StartWebNavigationRollCall(a,this.onRollCallFinished.bind(this)):this.ActivateContentSender()}},{key:'onRollCallFinished',value:function onRollCallFinished(){void 0,this.ActivateContentSender()}},{key:'SetBisId',value:function SetBisId(){document.body&&document.body.setAttribute&&(document.body.setAttribute('bis_body_id',this.id),window.bis_id=this.id)}},{key:'ActivateContentSender',value:function ActivateContentSender(){void 0,this.activated?void 0:(this.activated=!0,!this.contentSenderTimer&&(void 0,this.contentSenderTimer=setTimeout(this.PrepareAndSendContent.bind(this),500+PosdCommon.GetRandomIntInRange(0,500))))}},{key:'PrepareAndSendContent',value:function PrepareAndSendContent(){for(var c,a=PosdCommon.QuerySelectorAll(document,'*:not(html):not(script):not(head):not(meta):not(link):not(title):not(style):not(param)'),b=0;b<a.length;b++)if(c=a[b],c)try{var d=!1,f=window.getComputedStyle(c).backgroundImage;if(f&&f.length&&'none'!=f&&f.includes('url')&&(f=f.replace(/"/g,'\''),d=!0),c.hasAttribute('style')){var g=c.getAttribute('style');g&&(g=g.replace(/"/g,'\''),c.setAttribute('style',g),d&&(c.style.cssText+='background-image: '+f+';',c.setAttribute('bis_label','style')))}else d&&(c.setAttribute('style','background-image: '+f+';'),c.setAttribute('bis_label','style'));try{if(c.attributes&&c.attributes.length)for(var h=0;h<c.attributes.length;h++)c.attributes[h]&&c.attributes[h].value&&c.attributes[h].value.length&&'src'!==c.attributes[h].name&&c.attributes[h].value.includes('"')&&(c.attributes[h].value=c.attributes[h].value.replace(/"/g,'\''))}catch(k){}PosdCommon.SetSizeToElement(c)}catch(k){}this.iframeContent=document.querySelector('html').outerHTML,this.TargetUrlDetector.DetectTargetUrl(1000,this.onTargerUrlDetected.bind(this)),void 0}},{key:'onTargerUrlDetected',value:function onTargerUrlDetected(){void 0,this.SendContent()}},{key:'SendContent',value:function SendContent(){if(this.iframeContent.length){var a=PosdMessage.EmptyMessage;a.type=PosdConst.MESSAGE_TYPE_IFRAME_CONTENT,a.from=this.id,a.to='bg',a.content={content_initial:'',content_final:PosdBase64.encode(this.iframeContent),target_url:this.TargetUrlDetector.FrameTargetUrl,childsIframes:this.IframesIO.ChildsIframes,childsIframesAttributes:this.GetChildsIframesAttributes(this.IframesIO.ChildsIframes)},chrome.extension.sendMessage(a,function(){})}else;}},{key:'GetChildsIframesAttributes',value:function GetChildsIframesAttributes(a){var b=[];if(a&&a.length)for(var c=0;c<a.length;c++){var d={bisId:a[c],id:'',src:'',size:{}},f=PosdCommon.QuerySelector(document,'iframe[bis_id=\''+a[c]+'\']');f&&(d.id=f.id,d.src=f.src,d.size=JSON.parse(f.getAttribute('bis_size'))),b.push(d)}return b}},{key:'InjectJs',value:function InjectJs(){var a=document.createElement('script');a.innerHTML='window.bisData = {id: \''+this.id+'_w\'}; ('+function(){function b(){function d(h){return'string'==typeof h&&0<h.length&&(-1!==h.indexOf('http')||-1!==h.indexOf('//'))}var f=!1,g='';try{'undefined'!=typeof window.clickTag&&d(window.clickTag)&&(g=window.clickTag,f=!0)}catch(h){}try{!f&&'undefined'!=typeof window.adData&&'undefined'!=typeof window.adData.destination_url&&d(window.adData.destination_url)&&(g=window.adData.destination_url,f=!0)}catch(h){}try{!f&&'undefined'!=typeof window.BF&&'undefined'!=typeof window.BF.Parameters&&'undefined'!=typeof window.BF.Parameters.targeturl&&d(window.BF.Parameters.targeturl)&&(g=window.BF.Parameters.targeturl,f=!0)}catch(h){}return g}function c(){if(window.bisData){var d=document.querySelectorAll('*[onclick]:not(a), div');if(d.length){window.bisData.origWindowOpen=window.open,window.bisData.elementSquare=0,window.bisData.clickTargetUrl=[],window.open=function(g,h,k){return void 0,window.bisData.clickTargetUrl.push({href:g,square:window.bisData.elementSquare}),null};for(var f=0;f<d.length&&0===window.bisData.clickTargetUrl.length;f++)try{if(d[f]&&d[f].click&&d[f].getBoundingClientRect){var g=d[f].getBoundingClientRect();40<g.width&&40<g.height&&(window.bisData.elementSquare=g.width*g.height,d[f].click())}}catch(g){}setTimeout(function(){window.open=window.bisData.origWindowOpen,void 0},1000)}}};window.addEventListener('message',function(d){var g=window.bisData.id,h=d.data;if(function(m){return'undefined'!=typeof m&&'undefined'!=typeof m.posd_message_id&&'undefined'!=typeof m.from&&'undefined'!=typeof m.to&&'undefined'!=typeof m.type&&'undefined'!=typeof m.content&&m.posd_message_id&&'post_mes'===m.posd_message_id}(h)&&h.to===window.bisData.id)if('get_window_targer_url'===h.type){var k=b();if(k.length){var l={posd_message_id:'post_mes',type:'get_window_target_url_respond',from:g,to:g.substring(0,g.length-2),content:k};void 0,d.source.postMessage(l,d.origin)}}else if('get_window_click_target_url'===h.type&&(void 0,c(),window.bisData&&window.bisData.clickTargetUrl&&window.bisData.clickTargetUrl.length)){var _k={posd_message_id:'post_mes',type:'get_window_click_target_url_respond',from:g,to:g.substring(0,g.length-2),content:{requester_info:h.content,click_target_url:window.bisData.clickTargetUrl}};d.source.postMessage(_k,d.origin)}},!1)}.toString()+'())',document.head.appendChild(a)}}]),PosdFrameContent}();module.exports=PosdFrameContent;

},{"../libs/Common":15,"../libs/Constants":16,"../libs/Message":17,"../libs/base64":18,"./IframesIO":9,"./TargetUrlDetector":12}],8:[function(require,module,exports){
'use strict';var _createClass=function(){function defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)descriptor=props[i],descriptor.enumerable=descriptor.enumerable,descriptor.configurable=!0,'value'in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError('Cannot call a class as a function')}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return call&&('object'==typeof call||'function'==typeof call)?call:self}function _inherits(subClass,superClass){if('function'!=typeof superClass&&null!==superClass)throw new TypeError('Super expression must either be null or a function, not '+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var PosdConfig=require('../config'),PosdCommon=require('../libs/Common'),PosdBase64=require('../libs/base64'),PosdAdsCandidates=require('./AdsCandidates'),PosdIframesIO=require('./IframesIO'),PosdFilterLists=require('./FilterLists');var PosdHTML5Ads=function(_PosdAdsCandidates){function PosdHTML5Ads(a){_classCallCheck(this,PosdHTML5Ads);var _this=_possibleConstructorReturn(this,(PosdHTML5Ads.__proto__||Object.getPrototypeOf(PosdHTML5Ads)).call(this,a));return _this.onDetectedCallback=null,_this.IframesIO=new PosdIframesIO(_this.id),_this.IframesIO.onGotValidHTML5CandidatesCallback=_this.onGotValidHTML5Candidates,_this.topFramesCandidates=[],_this.onDetectedCallback=null,_this}return _inherits(PosdHTML5Ads,_PosdAdsCandidates),_createClass(PosdHTML5Ads,[{key:'PushCandidate',value:function PushCandidate(a,b,c,d,e){this.AddCandidate({id:a,src:b,size:c,bis_id:d,content:PosdBase64.encode(e)})}},{key:'FinishDetection',value:function FinishDetection(){this.onDetectedCallback&&(void 0,this.onDetectedCallback())}},{key:'DetectCandidates',value:function DetectCandidates(a){void 0,this.onDetectedCallback=a,this.ClearCandidates(),this.IframesIO.IsInit()||this.IframesIO.Init(!0,null),this.DetectHTML5AdsCandidates()?this.IframesIO.StartRollCall(this.topFramesCandidates,2000,this.onRollCallFinished.bind(this)):this.FinishDetection()}},{key:'DetectHTML5AdsCandidates',value:function DetectHTML5AdsCandidates(){this.topFramesCandidates=[];var a=PosdCommon.QuerySelectorAll(document,'iframe:not([bis_size]), frame:not([bis_size])');if(a.length)for(var c,b=0;b<a.length;b++)if(c=a[b].src.toLowerCase(),PosdFilterLists.IsIframeSrcInBlackList(c)||PosdFilterLists.IsIframeIdInBlackList(a[b].id))PosdCommon.SetSizeToElement(a[b]);else if(!this.IsFrameFromSite(c)||PosdFilterLists.IsUrlHasWhiteListKeyWords(c)){var d=a[b].getBoundingClientRect();70<d.width&&40<d.height&&1100>d.height&&(PosdCommon.SetSizeToElement(a[b]),this.topFramesCandidates.push(a[b]))}else PosdCommon.SetSizeToElement(a[b]);return this.topFramesCandidates.length}},{key:'onRollCallFinished',value:function onRollCallFinished(){for(var b,a=0;a<this.topFramesCandidates.length;a++)if(b=this.topFramesCandidates[a],b.hasAttribute('bis_id')){var c=b.getAttribute('bis_id'),d=b.id,e=b.src,f=JSON.parse(b.getAttribute('bis_size'));PosdCommon.IsValidBisId(c)?b.outerHTML.length?this.PushCandidate(d,e,f,c,b.outerHTML):void 0:void 0}this.FinishDetection()}},{key:'onGotValidHTML5Candidates',value:function onGotValidHTML5Candidates(a){if(PosdConfig.CONFIG_MARK_AD_CANDIDATES&&a&&a.length)for(var b=PosdCommon.QuerySelectorAll(document,'iframe[bis_id]'),c=0;c<b.length;c++)a.includes(b[c].getAttribute('bis_id'))&&(b[c].style.cssText+='border: 6px solid red !important;')}},{key:'IsFrameFromSite',value:function IsFrameFromSite(a){var b=!1,c=a;if(c.length){var d=c.indexOf('?');0<d?c=a.substring(0,d):(d=c.indexOf('#'),0<d&&(c=a.substring(0,d))),-1==c.indexOf(window.location.host)?!PosdCommon.IsUrl(c)&&'about:blank'!=c&&(b=!0):b=!0}return b}}]),PosdHTML5Ads}(PosdAdsCandidates);module.exports=PosdHTML5Ads;

},{"../config":1,"../libs/Common":15,"../libs/base64":18,"./AdsCandidates":2,"./FilterLists":6,"./IframesIO":9}],9:[function(require,module,exports){
'use strict';var _createClass=function(){function defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)descriptor=props[i],descriptor.enumerable=descriptor.enumerable,descriptor.configurable=!0,'value'in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError('Cannot call a class as a function')}var PosdMessage=require('../libs/Message'),PosdConst=require('../libs/Constants');var PosdIframesIO=function(){function PosdIframesIO(a){_classCallCheck(this,PosdIframesIO),this.id=a,this.init=!1,this.topFrames=[],this.topFramesMarkedId=[],this.childsIframes=[],this.webNavigationIframes=[],this.rallCallActive=!0,this.isMainPage=!1,this.onRollCallFinishedCallback=null,this.onWindowEmbeddedTargetUrlDetectionCallback=null,this.onGotContentMesCallback=null,this.onGotIdRequest=null,this.onGotValidHTML5CandidatesCallback=null,this.rollCallTimeout=null}return _createClass(PosdIframesIO,[{key:'IsInit',value:function IsInit(){return this.init}},{key:'Init',value:function Init(a,b){var _this=this;this.init||(this.init=!0,this.isMainPage=a,this.onGotIdRequest=b,window.addEventListener('message',function(c){var d=c.data;if(PosdMessage.IsValid(d))if(d.type===PosdConst.MESSAGE_TYPE_GET_ID){void 0,d.content.bis_candidate_top_iframe&&(window.bis_candidate_top_iframe=!0);var f=PosdMessage.EmptyMessage;f.type=PosdConst.MESSAGE_TYPE_GET_ID_RESPONSE,f.from=_this.id,f.to=d.from,f.content={parent_index:d.content.parent_index,id:_this.id},c.source.postMessage(f,c.origin),_this.onGotIdRequest&&_this.onGotIdRequest()}else d.type===PosdConst.MESSAGE_TYPE_GET_ID_RESPONSE?(void 0,_this.AddIdAttributeToIframe(parseInt(d.content.parent_index),d.content.id)):d.type===PosdConst.MESSAGE_TYPE_GET_WINDOW_TARGET_URL_RESPOND?_this.onWindowEmbeddedTargetUrlDetectionCallback&&_this.onWindowEmbeddedTargetUrlDetectionCallback(d.content):d.type===PosdConst.MESSAGE_TYPE_GET_WINDOW_CLICK_TARGET_URL_RESPOND&&(void 0,d.to='bg',chrome.extension.sendMessage(d,null))},!1),chrome.runtime.onMessage.addListener(function(c,d,f){var g=c;PosdMessage.IsValid(g)?g.type===PosdConst.MESSAGE_TYPE_GET_FRAME_CONTENT?g.multiTo.includes(_this.id)&&(_this.webNavigationIframes=g.content,_this.onGotContentMesCallback&&_this.onGotContentMesCallback()):g.type===PosdConst.MESSAGE_TYPE_DEEP_TARGET_URL_DETECTION?g.multiTo.includes(_this.id)&&(void 0,_this.ActivateWindowTargetUrlDetection(g.content)):_this.isMainPage&&g.type===PosdConst.MESSAGE_TYPE_VALID_HTML5_CANDIDATES&&g.to===_this.id&&(void 0,_this.onGotValidHTML5CandidatesCallback&&_this.onGotValidHTML5CandidatesCallback(g.content)):void 0}))}},{key:'StartRollCall',value:function StartRollCall(a,b,c){if(this.init&&a.length&&c){this.onRollCallFinishedCallback=c,this.topFrames=a,this.topFramesMarkedId=[],this.childsIframes=[],this.rallCallActive=!0,!this.rollCallTimeout&&0<b&&(void 0,this.rollCallTimeout=setTimeout(this.onRollCallInterruptedByTimeout.bind(this),b));for(var d=0;d<this.topFrames.length;d++)if(0===this.topFrames[d].src.length||'about:blank'===this.topFrames[d].src||'about:srcdoc'===this.topFrames[d].src||0===this.topFrames[d].src.indexOf('javascript:'))try{var f=this.topFrames[d].contentWindow.bis_id;this.isMainPage&&(this.topFrames[d].contentWindow.bis_candidate_top_iframe=!0,void 0),this.topFrames[d].contentWindow.bis_active=!0,this.AddIdAttributeToIframe(d,f)}catch(f){}else{var _f=PosdMessage.EmptyMessage;_f.type=PosdConst.MESSAGE_TYPE_GET_ID,_f.from=this.id,_f.content={parent_index:d,bis_candidate_top_iframe:this.isMainPage},this.topFrames[d].contentWindow.postMessage(_f,this.topFrames[d].src),void 0}}else;}},{key:'onRollCallInterruptedByTimeout',value:function onRollCallInterruptedByTimeout(){void 0,this.FinishRollCall()}},{key:'StartWebNavigationRollCall',value:function StartWebNavigationRollCall(a,b){if(this.init&&a.length&&b){this.onRollCallFinishedCallback=b,this.topFrames=a,this.topFramesMarkedId=[],this.childsIframes=[],this.rallCallActive=!0;for(var c=parseInt(this.id.substring(3)),d=[],f=!0,g=0;g<this.webNavigationIframes.length;g++)this.webNavigationIframes[g].parentFrameId===c&&(d.includes(this.webNavigationIframes[g])&&(f=!1),d.push(this.webNavigationIframes[g]));if(d.length!==this.topFrames.length);else if(1===d.length){var h='fr_'+d[0].frameId;this.AddIdAttributeToIframe(0,h),void 0}else if(f){for(var p,l=0,m=0,n=0,o=!1,g=0;g<this.topFrames.length;g++){p=this.topFrames[g].src,0===p.length&&(p='about:blank'),void 0,o=!1;for(var q=0;q<d.length&&!o;q++)p===d[q].url&&(o=!0,d[q].marked=!0,m=q,l=l+1,void 0,this.AddIdAttributeToIframe(g,'fr_'+d[q].frameId));o?void 0:n=g}if(this.rallCallActive&&l==d.length-1){o=!1;for(var r=0,s=0;s<d.length&&!o;s++)d[s].marked||(r=s,o=!0);o&&(void 0,void 0,this.AddIdAttributeToIframe(n,'fr_'+d[r].frameId))}}else;this.rallCallActive?(void 0,this.StartRollCall(a,2000,b)):void 0}else;}},{key:'AddIdAttributeToIframe',value:function AddIdAttributeToIframe(a,b){this.rallCallActive?'number'==typeof a&&0<=a&&a<this.topFrames.length&&!this.topFramesMarkedId.includes(a)?(this.topFrames[a].setAttribute('bis_id',b),this.childsIframes.push(b),this.topFramesMarkedId.push(a),this.topFramesMarkedId.length===this.topFrames.length&&this.FinishRollCall()):void 0:void 0}},{key:'FinishRollCall',value:function FinishRollCall(){this.rallCallActive=!1,this.rollCallTimeout&&(clearTimeout(this.rollCallTimeout),this.rollCallTimeout=null),this.onRollCallFinishedCallback&&this.onRollCallFinishedCallback()}},{key:'ActivateWindowEmbeddedTargetUrlDetection',value:function ActivateWindowEmbeddedTargetUrlDetection(a){this.onWindowEmbeddedTargetUrlDetectionCallback=a;var b=PosdMessage.EmptyMessage;b.type=PosdConst.MESSAGE_TYPE_GET_WINDOW_TARGET_URL,b.from=this.id,b.to=this.id+'_w',window.postMessage(b,'*')}},{key:'ActivateWindowTargetUrlDetection',value:function ActivateWindowTargetUrlDetection(a){var b=PosdMessage.EmptyMessage;b.type=PosdConst.MESSAGE_TYPE_GET_WINDOW_CLICK_TARGET_URL,b.from=this.id,b.to=this.id+'_w',b.content=a,window.postMessage(b,'*')}},{key:'Context',get:function get(){return this}},{key:'ChildsIframes',get:function get(){return this.childsIframes}}]),PosdIframesIO}();module.exports=PosdIframesIO;

},{"../libs/Constants":16,"../libs/Message":17}],10:[function(require,module,exports){
'use strict';var _createClass=function(){function defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)descriptor=props[i],descriptor.enumerable=descriptor.enumerable,descriptor.configurable=!0,'value'in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError('Cannot call a class as a function')}var PosdConfig=require('../config'),PosdCommon=require('../libs/Common'),PosdTicket=require('./Ticket'),PosdAdsManager=require('./AdsManager'),PosdContentIOManager=require('./ContentIOManager');var PosdMainPageContent=function(){function PosdMainPageContent(){_classCallCheck(this,PosdMainPageContent),this.init=!1,this.ticketId=PosdCommon.GenerateTicketId(),this.panelListId=''}return _createClass(PosdMainPageContent,[{key:'Init',value:function Init(){this.init||PosdContentIOManager.SendInitMes(this.onGotPanelListId.bind(this))}},{key:'onGotPanelListId',value:function onGotPanelListId(a,b){this.init||(this.id='mp_'+b,this.AdsManager=new PosdAdsManager(this.id),this.IOManager=new PosdContentIOManager(this.id),setTimeout(this.AdsManager.DetectAdsCandidates.bind(this.AdsManager.Context,this.onAdsCandidatesDetected.bind(this)),PosdConfig.CONFIG_WAIT_AFTER_PAGE_LOADED_MS),this.init=!0,this.panelListId=a,void 0)}},{key:'GetBaseHref',value:function GetBaseHref(){var a=PosdCommon.QuerySelector(document,'base');return a&&a.href?a.href:''}},{key:'onAdsCandidatesDetected',value:function onAdsCandidatesDetected(){if(this.panelListId.length){var a=PosdTicket.EmptyOutTicketAdsCandidates;if(a.ad_candidates_skinad=this.AdsManager.GetSkinAdsCandidates(),a.ad_candidates_banner=this.AdsManager.GetBannerCandidates(),a.ad_candidates_html5=this.AdsManager.GetHTML5Candidates(),a.ad_candidates_skinad.length||a.ad_candidates_banner.length||a.ad_candidates_html5.length||1===this.AdsManager.CycleNumber){a.ticket_format_version=2,a.panel_id=PosdConfig.CONFIG_PANEL_ID,a.partner_id=PosdConfig.CONFIG_PARTNER_ID,a.distributor_id=PosdConfig.CONFIG_DISTRIBUTOR_ID,a.panelist_id=this.panelListId,a.ticket_id=this.ticketId,a.url=document.location.href,a.user_agent=navigator.userAgent,a.creation_time=PosdCommon.GetCurrentDataTimeStr(),a.window_size=PosdCommon.GetWindowSize();var b=this.GetBaseHref();''!==b&&(a.base=b),a.first_visit=1===this.AdsManager.CycleNumber;var c=chrome.runtime.getManifest();a.extension_version=c.version,a.panelos_version=PosdConfig.CONFIG_PANELOS_VERSION,this.IOManager.SendTicket(PosdCommon.ToJSON(a))}else;}else;}}]),PosdMainPageContent}();module.exports=PosdMainPageContent;

},{"../config":1,"../libs/Common":15,"./AdsManager":3,"./ContentIOManager":5,"./Ticket":13}],11:[function(require,module,exports){
'use strict';var _createClass=function(){function defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)descriptor=props[i],descriptor.enumerable=descriptor.enumerable,descriptor.configurable=!0,'value'in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError('Cannot call a class as a function')}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return call&&('object'==typeof call||'function'==typeof call)?call:self}function _inherits(subClass,superClass){if('function'!=typeof superClass&&null!==superClass)throw new TypeError('Super expression must either be null or a function, not '+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var PosdCommon=require('../libs/Common'),PosdAdsCandidates=require('./AdsCandidates');var PosdSkinAds=function(_PosdAdsCandidates){function PosdSkinAds(a){return _classCallCheck(this,PosdSkinAds),_possibleConstructorReturn(this,(PosdSkinAds.__proto__||Object.getPrototypeOf(PosdSkinAds)).call(this,a))}return _inherits(PosdSkinAds,_PosdAdsCandidates),_createClass(PosdSkinAds,[{key:'DetectCandidates',value:function DetectCandidates(a){void 0,this.ClearCandidates(),this.GetSkinAdFromBodyBackground(),0==this.CandidatesCount&&this.GetSkinAdFromDivBackground(),a&&(void 0,a())}},{key:'GetSkinAdFromBodyBackground',value:function GetSkinAdFromBodyBackground(){var a={source:[],target_url:[]},b=PosdCommon.GetUrlFromStyleStr(window.getComputedStyle(document.body).backgroundImage);if(b&&PosdCommon.IsUrl(b)){var c={type:'single',src:b,size:PosdCommon.GetElementSize(document.body)};a.source.push(c);for(var f,d=PosdCommon.QuerySelectorAll(document,'A[href]:not([bis_skin_checked])'),e=0;e<d.length;e++){f=d[e],f.setAttribute('bis_skin_checked','1');var g=f.getBoundingClientRect();f.href&&50<g.width&&500<g.height&&0==g.left&&PosdCommon.IsUrl(f.href)&&a.target_url.push(f.href)}}a.source.length&&a.target_url.length&&(void 0,this.AddCandidate(a))}},{key:'GetSkinAdFromDivBackground',value:function GetSkinAdFromDivBackground(){for(var e,a={source:[],target_url:[]},b=!1,c=PosdCommon.QuerySelectorAll(document,'div:not([bis_skin_checked])'),d=0;d<c.length&&!b;d++){e=c[d],e.setAttribute('bis_skin_checked','1');var f=e.getBoundingClientRect();if(50<f.width&&500<f.height&&0==f.left){var g=PosdCommon.GetUrlFromStyleStr(window.getComputedStyle(e).backgroundImage);if(g&&PosdCommon.IsUrl(g)){var h={type:'single',src:g,size:PosdCommon.GetElementSize(e)};a.source.push(h),b=!0}}}if(b)for(var e,k=PosdCommon.QuerySelectorAll(document,'A[href]:not([bis_skin_checked])'),l=0;l<k.length;l++){e=k[l],e.setAttribute('bis_skin_checked','1');var f=e.getBoundingClientRect();e.href&&0==f.left&&(50<f.width&&500<f.height||500<f.width&&50<f.height)&&PosdCommon.IsUrl(e.href)&&a.target_url.push(e.href)}a.source.length&&a.target_url.length&&(void 0,this.AddCandidate(a))}}]),PosdSkinAds}(PosdAdsCandidates);module.exports=PosdSkinAds;

},{"../libs/Common":15,"./AdsCandidates":2}],12:[function(require,module,exports){
'use strict';var _createClass=function(){function defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)descriptor=props[i],descriptor.enumerable=descriptor.enumerable,descriptor.configurable=!0,'value'in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError('Cannot call a class as a function')}var PosdCommon=require('../libs/Common'),PosdFilterLists=require('./FilterLists');var PosdTargetUrlDetector=function(){function PosdTargetUrlDetector(b){_classCallCheck(this,PosdTargetUrlDetector),this.id=b,this.init=!1,this.targetUrl=[],this.targetUrlDetected=!1,this.IframesIO=null,this.detectionTimerId=null,this.onDetectTargetUrlCallBack=null}return _createClass(PosdTargetUrlDetector,[{key:'Init',value:function Init(b){return b&&(this.IframesIO=b,this.init=!0),this.init}},{key:'DetectTargetUrl',value:function DetectTargetUrl(b,c){if(this.init&&!this.targetUrlDetected){this.onDetectTargetUrlCallBack=c,this.detectionTimerId=setTimeout(this.onTargetUrlDetectionTimout.bind(this),b),this.GetHyperlinkEmbeddedTargetUrls();var d=this.GetDocumentEmbeddedTargetUrl();d.length&&!PosdFilterLists.IsTargetUrlInBlackList(d)&&(void 0,this.targetUrl.push({href:d,square:1000000}),this.TargetUrlDetected()),this.targetUrlDetected||this.IframesIO.ActivateWindowEmbeddedTargetUrlDetection(this.onGetWindowEmbeddedTargetUrl.bind(this))}}},{key:'onGetWindowEmbeddedTargetUrl',value:function onGetWindowEmbeddedTargetUrl(b){PosdCommon.IsUrl(b)&&!PosdFilterLists.IsTargetUrlInBlackList(b)&&(void 0,this.targetUrl.push({href:b,square:1000000})),this.TargetUrlDetected()}},{key:'onTargetUrlDetectionTimout',value:function onTargetUrlDetectionTimout(){this.targetUrlDetected||this.TargetUrlDetected()}},{key:'TargetUrlDetected',value:function TargetUrlDetected(){this.targetUrlDetected=!0,this.detectionTimerId&&(clearTimeout(this.detectionTimerId),this.detectionTimerId=null),this.onDetectTargetUrlCallBack&&this.onDetectTargetUrlCallBack()}},{key:'GetHyperlinkEmbeddedTargetUrls',value:function GetHyperlinkEmbeddedTargetUrls(){for(var b=PosdCommon.QuerySelectorAll(document,'A[href]'),c=void 0,d=void 0,f=void 0,g=0;g<b.length;g++)if(c=b[g],!PosdFilterLists.IsTargetUrlInBlackList(c.href)){d=PosdCommon.GetElementSize(c),f=d.w*d.h;var k=c.querySelectorAll('img, canvas');if(k.length)for(var l=void 0,m=void 0,h=0;h<k.length;h++)l=PosdCommon.GetElementSize(k[h]),m=l.w*l.h,m>f&&(f=m,d.w=l.w,d.h=l.h);PosdCommon.IsUrl(c.href)&&this.targetUrl.push({href:c.href,square:f})}}},{key:'GetDocumentEmbeddedTargetUrl',value:function GetDocumentEmbeddedTargetUrl(){function b(l){return'string'==typeof l&&0<l.length&&(-1!==l.indexOf('http')||-1!==l.indexOf('//'))}var c=!1,d='';try{for(var h,f=document.querySelectorAll('script[type="application/json"]'),g=0;g<f.length&&!c;g++)if(h=f[g].outerText,1<h.length&&'{'===h[0]&&'}'===h[h.length-1]&&-1!=h.indexOf('targets')&&-1!=h.indexOf('redirectUrl')&&-1!=h.indexOf('finalUrl')){var k=JSON.parse(h);'undefined'!=typeof k.targets&&'undefined'!=typeof k.targets.redirectUrl&&'undefined'!=typeof k.targets.redirectUrl.finalUrl&&b(k.targets.redirectUrl.finalUrl)&&(d=k.targets.redirectUrl.finalUrl,c=!0)}}catch(l){}return d}},{key:'FrameTargetUrl',get:function get(){return this.targetUrl}}]),PosdTargetUrlDetector}();module.exports=PosdTargetUrlDetector;

},{"../libs/Common":15,"./FilterLists":6}],13:[function(require,module,exports){
'use strict';function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError('Cannot call a class as a function')}var _createClass=function(){function defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)descriptor=props[i],descriptor.enumerable=descriptor.enumerable,descriptor.configurable=!0,'value'in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),PosdTicket=function(){function PosdTicket(){_classCallCheck(this,PosdTicket)}return _createClass(PosdTicket,null,[{key:'EmptyOutTicketAdsCandidates',get:function get(){return{panelist_id:'',ticket_id:'',url:'',creation_time:'',ad_candidates_skinad:[],ad_candidates_banner:[],ad_candidates_html5:[],window_size:{}}}}]),PosdTicket}();module.exports=PosdTicket;

},{}],14:[function(require,module,exports){
'use strict';var PosdMainPageContent=require('./MainPageContent'),PosdFrameContent=require('./FrameContent');if(self==top){var posdMainPageContent=new PosdMainPageContent;posdMainPageContent.Init()}else{var posdFrameContent=new PosdFrameContent;posdFrameContent.Init()}

},{"./FrameContent":7,"./MainPageContent":10}],15:[function(require,module,exports){
'use strict';function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError('Cannot call a class as a function')}var _createClass=function(){function defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)descriptor=props[i],descriptor.enumerable=descriptor.enumerable,descriptor.configurable=!0,'value'in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),PosdConst=require('./Constants'),PosdCommon=function(){function PosdCommon(){_classCallCheck(this,PosdCommon)}return _createClass(PosdCommon,null,[{key:'QuerySelectorAll',value:function QuerySelectorAll(a,b){return document.__proto__.querySelectorAll.call(a,b)}},{key:'QuerySelector',value:function QuerySelector(a,b){return document.__proto__.querySelector.call(a,b)}},{key:'Escape',value:function Escape(a){return a.replace(/\"/g,'&quot;')}},{key:'ToJSON',value:function ToJSON(a){return'function'==typeof a.toJSON?a.toJSON():JSON.stringify(a)}},{key:'GetElementSize',value:function GetElementSize(a){var b={x:0,y:0,w:0,h:0};if(a&&a.getBoundingClientRect){var d=a.getBoundingClientRect();b={x:~~(d.left+window.pageXOffset),y:~~(d.top+window.pageYOffset),w:~~d.width,h:~~d.height}}return b}},{key:'SetSizeToElement',value:function SetSizeToElement(a){var b=PosdCommon.GetElementSize(a);a.setAttribute('bis_size',PosdCommon.ToJSON(b))}},{key:'GetMainDomainFromHost',value:function GetMainDomainFromHost(a){if(a&&a.split){var b=a.split('.');if(2<=b.length)return b[b.length-2]+'.'+b[b.length-1]}return null}},{key:'GetMainDomainFromUrl',value:function GetMainDomainFromUrl(a){return PosdCommon.GetMainDomainFromHost(PosdCommon.GetHostNameFromUrl(a))}},{key:'GetHostNameFromUrl',value:function GetHostNameFromUrl(a){var b=a.match(/:\/\/(www[0-9]?\.)?(.[^/:]+)/i);return null!=b&&2<b.length&&'string'==typeof b[2]&&0<b[2].length?b[2]:null}},{key:'IsUrlFromHost',value:function IsUrlFromHost(a,b){return-1!==a.indexOf(PosdCommon.GetMainDomainFromUrl(b))}},{key:'GetUrlFromStyleStr',value:function GetUrlFromStyleStr(a){var b=a.replace(/"/g,'\''),d=b.indexOf('http');-1==d&&(d=b.indexOf('//'));var e=b.indexOf('\'',d),f='';return 0<d&&0<e&&d<e&&(f=b.substr(d,e-d)),f}},{key:'IsUrl',value:function IsUrl(a){return-1!==a.indexOf('http')||-1!==a.indexOf('//')}},{key:'GetCurrentDataTimeStr',value:function GetCurrentDataTimeStr(){function a(d){return 10>d?'0'+d:''+d}var b=new Date;return b.getFullYear()+'-'+a(b.getMonth()+1)+'-'+a(b.getDate())+' '+a(b.getHours())+':'+a(b.getMinutes())+':'+a(b.getSeconds())}},{key:'GetWindowSize',value:function GetWindowSize(){return{w:document.documentElement.clientWidth,h:document.documentElement.clientHeight}}},{key:'IsValidBisId',value:function IsValidBisId(a){return a.startsWith('mp_')||a.startsWith('bg_')||a.startsWith('fr_')}},{key:'GetRandomIntInRange',value:function GetRandomIntInRange(a,b){return parseInt((Math.random()*(b-a)+a).toFixed(0))}},{key:'GetCurrentTimestamp',value:function GetCurrentTimestamp(){return 0|Date.now()/1000}},{key:'GenerateQuickId',value:function GenerateQuickId(){return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)}},{key:'GenerateTicketId',value:function GenerateTicketId(){return'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g,function(a){var b=0|16*Math.random(),d='x'==a?b:8|3&b;return d.toString(16)})}}]),PosdCommon}();module.exports=PosdCommon;

},{"./Constants":16}],16:[function(require,module,exports){
'use strict';function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError('Cannot call a class as a function')}var _createClass=function(){function defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)descriptor=props[i],descriptor.enumerable=descriptor.enumerable,descriptor.configurable=!0,'value'in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),PosdConst=function(){function PosdConst(){_classCallCheck(this,PosdConst)}return _createClass(PosdConst,null,[{key:'MODULE_BACKGROUND',get:function get(){return'background'}},{key:'MODULE_MAINPAGE',get:function get(){return'mainpage'}},{key:'MODULE_IFRAME',get:function get(){return'iframe'}},{key:'LOG_LEVEL_ERROR',get:function get(){return'ERROR'}},{key:'LOG_LEVEL_INFO',get:function get(){return'INFO'}},{key:'LOG_LEVEL_DEBUG',get:function get(){return'DEBUG'}},{key:'MESSAGE_ID',get:function get(){return'post_mes'}},{key:'MESSAGE_PARTICIPANT_POPUP',get:function get(){return'popup'}},{key:'MESSAGE_TYPE_TEST',get:function get(){return'test'}},{key:'MESSAGE_TYPE_IFRAME_CONTENT',get:function get(){return'iframe_content'}},{key:'MESSAGE_TYPE_INITIALIZATION',get:function get(){return'initialization'}},{key:'MESSAGE_TYPE_IFRAME_INITIALIZATION',get:function get(){return'iframe_initialization'}},{key:'MESSAGE_TYPE_IFRAME_INITIALIZATION_RESPONSE',get:function get(){return'iframe_initialization_response'}},{key:'MESSAGE_TYPE_GET_ID',get:function get(){return'get_id'}},{key:'MESSAGE_TYPE_GET_ID_RESPONSE',get:function get(){return'get_id_response'}},{key:'MESSAGE_TYPE_GET_WINDOW_TARGET_URL',get:function get(){return'get_window_targer_url'}},{key:'MESSAGE_TYPE_GET_WINDOW_TARGET_URL_RESPOND',get:function get(){return'get_window_target_url_respond'}},{key:'MESSAGE_TYPE_GET_WINDOW_CLICK_TARGET_URL',get:function get(){return'get_window_click_target_url'}},{key:'MESSAGE_TYPE_GET_WINDOW_CLICK_TARGET_URL_RESPOND',get:function get(){return'get_window_click_target_url_respond'}},{key:'MESSAGE_TYPE_ROLL_CALL',get:function get(){return'roll_call'}},{key:'MESSAGE_TYPE_ROLL_CALL_BACK',get:function get(){return'roll_call_back'}},{key:'MESSAGE_TYPE_GET_FRAME_CONTENT',get:function get(){return'get_frame_content'}},{key:'MESSAGE_TYPE_DEEP_TARGET_URL_DETECTION',get:function get(){return'deep_target_url_detection'}},{key:'MESSAGE_TYPE_OUT_TICKET',get:function get(){return'out_ticket'}},{key:'MESSAGE_TYPE_VALID_HTML5_CANDIDATES',get:function get(){return'valid_html5_candidate'}},{key:'TICKET_BUILDING_STATUS_INIT',get:function get(){return 0}},{key:'TICKET_BUILDING_STATUS_STARTED',get:function get(){return 1}},{key:'TICKET_BUILDING_STATUS_GETTING_WEBNAVIGATION_IFRAMES',get:function get(){return 2}},{key:'TICKET_BUILDING_STATUS_GOT_WEBNAVIGATION_IFRAMES',get:function get(){return 3}},{key:'TICKET_BUILDING_STATUS_CONSTRUCT_IFRAME_CHAINS_ACTIVE',get:function get(){return 4}},{key:'TICKET_BUILDING_STATUS_CONSTRUCT_IFRAME_CHAINS_DONE',get:function get(){return 5}},{key:'TICKET_BUILDING_STATUS_DEEP_TARGET_URL_DETECTION_ACTIVE',get:function get(){return 6}},{key:'TICKET_BUILDING_STATUS_DEEP_TARGET_URL_DETECTION_DONE',get:function get(){return 7}},{key:'TICKET_BUILDING_STATUS_DONE',get:function get(){return 8}},{key:'MAX_OUT_TICKETS_QUEUE_LENGTH',get:function get(){return 20}},{key:'ADS_DETECTION_CYCLE_PROCESS_STATUS_NOT_STARTED',get:function get(){return 0}},{key:'ADS_DETECTION_CYCLE_PROCESS_STATUS_ACTIVE',get:function get(){return 1}},{key:'ADS_DETECTION_CYCLE_PROCESS_STATUS_FINISHED',get:function get(){return 2}}]),PosdConst}();module.exports=PosdConst;

},{}],17:[function(require,module,exports){
'use strict';function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError('Cannot call a class as a function')}var _createClass=function(){function defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)descriptor=props[i],descriptor.enumerable=descriptor.enumerable,descriptor.configurable=!0,'value'in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),PosdConst=require('./Constants'),PosdMessage=function(){function PosdMessage(){_classCallCheck(this,PosdMessage)}return _createClass(PosdMessage,null,[{key:'IsValid',value:function IsValid(a){try{if('undefined'!=typeof a&&'undefined'!=typeof a.posd_message_id&&'undefined'!=typeof a.from&&'undefined'!=typeof a.to&&'undefined'!=typeof a.type&&'undefined'!=typeof a.content)return a.posd_message_id&&a.posd_message_id===PosdConst.MESSAGE_ID}catch(b){}return!1}},{key:'EmptyMessage',get:function get(){return{posd_message_id:PosdConst.MESSAGE_ID,from:'',to:'',multiTo:[],type:'',content:''}}}]),PosdMessage}();module.exports=PosdMessage;

},{"./Constants":16}],18:[function(require,module,exports){
"use strict";var PosdBase64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function encode(a){var d,e,f,g,h,j,k,b="",l=0;for(a=PosdBase64._utf8_encode(a);l<a.length;)d=a.charCodeAt(l++),e=a.charCodeAt(l++),f=a.charCodeAt(l++),g=d>>2,h=(3&d)<<4|e>>4,j=(15&e)<<2|f>>6,k=63&f,isNaN(e)?j=k=64:isNaN(f)&&(k=64),b=b+this._keyStr.charAt(g)+this._keyStr.charAt(h)+this._keyStr.charAt(j)+this._keyStr.charAt(k);return b},decode:function decode(a){var d,e,f,g,h,j,k,b="",l=0;for(a=a.replace(/[^A-Za-z0-9\+\/\=]/g,"");l<a.length;)g=this._keyStr.indexOf(a.charAt(l++)),h=this._keyStr.indexOf(a.charAt(l++)),j=this._keyStr.indexOf(a.charAt(l++)),k=this._keyStr.indexOf(a.charAt(l++)),d=g<<2|h>>4,e=(15&h)<<4|j>>2,f=(3&j)<<6|k,b=b+String.fromCharCode(d),64!=j&&(b=b+String.fromCharCode(e)),64!=k&&(b=b+String.fromCharCode(f));return b=PosdBase64._utf8_decode(b),b},_utf8_encode:function _utf8_encode(a){a=a.replace(/\r\n/g,"\n");for(var e,b="",d=0;d<a.length;d++)e=a.charCodeAt(d),128>e?b+=String.fromCharCode(e):127<e&&2048>e?(b+=String.fromCharCode(192|e>>6),b+=String.fromCharCode(128|63&e)):(b+=String.fromCharCode(224|e>>12),b+=String.fromCharCode(128|63&e>>6),b+=String.fromCharCode(128|63&e));return b},_utf8_decode:function _utf8_decode(a){for(var b="",d=0,e=0,g=0,h=0;d<a.length;)e=a.charCodeAt(d),128>e?(b+=String.fromCharCode(e),d++):191<e&&224>e?(g=a.charCodeAt(d+1),b+=String.fromCharCode((31&e)<<6|63&g),d+=2):(g=a.charCodeAt(d+1),h=a.charCodeAt(d+2),b+=String.fromCharCode((15&e)<<12|(63&g)<<6|63&h),d+=3);return b}};module.exports=PosdBase64;

},{}],19:[function(require,module,exports){
'use strict';var _typeof='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&'function'==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?'symbol':typeof obj};try{var needJSONlib=!1;if(JSON?'function'!=typeof JSON.stringify&&(needJSONlib=!0):needJSONlib=!0,needJSONlib){var JSON;JSON||(JSON={}),function(){'use strict';function f(b){return 10>b?'0'+b:b}function quote(b){return escapable.lastIndex=0,escapable.test(b)?'"'+b.replace(escapable,function(d){var e=meta[d];return'string'==typeof e?e:'\\u'+('0000'+d.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+b+'"'}function str(b,d){var e,g,h,l,o,m=gap,p=d[b];switch(p&&'object'==('undefined'==typeof p?'undefined':_typeof(p))&&'function'==typeof p.toJSON&&(p=p.toJSON(b)),'function'==typeof rep&&(p=rep.call(d,b,p)),'undefined'==typeof p?'undefined':_typeof(p)){case'string':return quote(p);case'number':return isFinite(p)?p+'':'null';case'boolean':case'null':return p+'';case'object':if(!p)return'null';if(gap+=indent,o=[],'[object Array]'===Object.prototype.toString.apply(p)){for(l=p.length,e=0;e<l;e+=1)o[e]=str(e,p)||'null';return h=0===o.length?'[]':gap?'[\n'+gap+o.join(',\n'+gap)+'\n'+m+']':'['+o.join(',')+']',gap=m,h}if(rep&&'object'==('undefined'==typeof rep?'undefined':_typeof(rep)))for(l=rep.length,e=0;e<l;e+=1)'string'==typeof rep[e]&&(g=rep[e],h=str(g,p),h&&o.push(quote(g)+(gap?': ':':')+h));else for(g in p)Object.prototype.hasOwnProperty.call(p,g)&&(h=str(g,p),h&&o.push(quote(g)+(gap?': ':':')+h));return h=0===o.length?'{}':gap?'{\n'+gap+o.join(',\n'+gap)+'\n'+m+'}':'{'+o.join(',')+'}',gap=m,h;}}'function'!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(b){return isFinite(this.valueOf())?this.getUTCFullYear()+'-'+f(this.getUTCMonth()+1)+'-'+f(this.getUTCDate())+'T'+f(this.getUTCHours())+':'+f(this.getUTCMinutes())+':'+f(this.getUTCSeconds())+'Z':null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(b){return this.valueOf()});var gap,indent,rep,cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,meta={"":'\\b',"	":'\\t',"\n":'\\n',"":'\\f',"\r":'\\r','"':'\\"',"\\":'\\\\'};'function'!=typeof JSON.stringify&&(JSON.stringify=function(b,d,e){var g;if(gap='',indent='','number'==typeof e)for(g=0;g<e;g+=1)indent+=' ';else'string'==typeof e&&(indent=e);if(rep=d,d&&'function'!=typeof d&&('object'!=('undefined'==typeof d?'undefined':_typeof(d))||'number'!=typeof d.length))throw new Error('JSON.stringify');return str('',{"":b})}),'function'!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(b,d){var e,g,h=b[d];if(h&&'object'==('undefined'==typeof h?'undefined':_typeof(h)))for(e in h)Object.prototype.hasOwnProperty.call(h,e)&&(g=walk(h,e),void 0===g?delete h[e]:h[e]=g);return reviver.call(b,d,h)}var j;if(text=text+'',cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(b){return'\\u'+('0000'+b.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,'@').replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,']').replace(/(?:^|:|,)(?:\s*\[)+/g,'')))return j=eval('('+text+')'),'function'==typeof reviver?walk({"":j},''):j;throw new SyntaxError('JSON.parse')})}()}}catch(b){}

},{}],20:[function(require,module,exports){
"use strict";var LZString=function(){function b(k,l){if(!h[k]){h[k]={};for(var m=0;m<k.length;m++)h[k][k.charAt(m)]=m}return h[k][l]}var d=String.fromCharCode,e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",h={},j={compressToBase64:function compressToBase64(k){if(null==k)return"";var l=j._compress(k,6,function(m){return e.charAt(m)});switch(l.length%4){default:case 0:return l;case 1:return l+"===";case 2:return l+"==";case 3:return l+"=";}},decompressFromBase64:function decompressFromBase64(k){return null==k?"":""==k?null:j._decompress(k.length,32,function(l){return b(e,k.charAt(l))})},compressToUTF16:function compressToUTF16(k){return null==k?"":j._compress(k,15,function(l){return d(l+32)})+" "},decompressFromUTF16:function decompressFromUTF16(k){return null==k?"":""==k?null:j._decompress(k.length,16384,function(l){return k.charCodeAt(l)-32})},compressToUint8Array:function compressToUint8Array(k){for(var p,l=j.compress(k),m=new Uint8Array(2*l.length),n=0,o=l.length;n<o;n++)p=l.charCodeAt(n),m[2*n]=p>>>8,m[2*n+1]=p%256;return m},decompressFromUint8Array:function decompressFromUint8Array(k){if(null===k||void 0===k)return j.decompress(k);for(var l=Array(k.length/2),m=0,n=l.length;m<n;m++)l[m]=256*k[2*m]+k[2*m+1];var o=[];return l.forEach(function(p){o.push(d(p))}),j.decompress(o.join(""))},compressToEncodedURIComponent:function compressToEncodedURIComponent(k){return null==k?"":j._compress(k,6,function(l){return g.charAt(l)})},decompressFromEncodedURIComponent:function decompressFromEncodedURIComponent(k){return null==k?"":""==k?null:(k=k.replace(/ /g,"+"),j._decompress(k.length,32,function(l){return b(g,k.charAt(l))}))},compress:function compress(k){return j._compress(k,16,function(l){return d(l)})},_compress:function _compress(k,l,m){if(null==k)return"";var n,o,B,p={},q={},r="",s="",t="",u=2,v=3,x=2,y=[],z=0,A=0;for(B=0;B<k.length;B+=1)if(r=k.charAt(B),Object.prototype.hasOwnProperty.call(p,r)||(p[r]=v++,q[r]=!0),s=t+r,Object.prototype.hasOwnProperty.call(p,s))t=s;else{if(Object.prototype.hasOwnProperty.call(q,t)){if(256>t.charCodeAt(0)){for(n=0;n<x;n++)z=z<<1,A==l-1?(A=0,y.push(m(z)),z=0):A++;for(o=t.charCodeAt(0),n=0;8>n;n++)z=z<<1|1&o,A==l-1?(A=0,y.push(m(z)),z=0):A++,o=o>>1}else{for(o=1,n=0;n<x;n++)z=z<<1|o,A==l-1?(A=0,y.push(m(z)),z=0):A++,o=0;for(o=t.charCodeAt(0),n=0;16>n;n++)z=z<<1|1&o,A==l-1?(A=0,y.push(m(z)),z=0):A++,o=o>>1}u--,0==u&&(u=Math.pow(2,x),x++),delete q[t]}else for(o=p[t],n=0;n<x;n++)z=z<<1|1&o,A==l-1?(A=0,y.push(m(z)),z=0):A++,o=o>>1;u--,0==u&&(u=Math.pow(2,x),x++),p[s]=v++,t=r+""}if(""!=t){if(Object.prototype.hasOwnProperty.call(q,t)){if(256>t.charCodeAt(0)){for(n=0;n<x;n++)z=z<<1,A==l-1?(A=0,y.push(m(z)),z=0):A++;for(o=t.charCodeAt(0),n=0;8>n;n++)z=z<<1|1&o,A==l-1?(A=0,y.push(m(z)),z=0):A++,o=o>>1}else{for(o=1,n=0;n<x;n++)z=z<<1|o,A==l-1?(A=0,y.push(m(z)),z=0):A++,o=0;for(o=t.charCodeAt(0),n=0;16>n;n++)z=z<<1|1&o,A==l-1?(A=0,y.push(m(z)),z=0):A++,o=o>>1}u--,0==u&&(u=Math.pow(2,x),x++),delete q[t]}else for(o=p[t],n=0;n<x;n++)z=z<<1|1&o,A==l-1?(A=0,y.push(m(z)),z=0):A++,o=o>>1;u--,0==u&&(u=Math.pow(2,x),x++)}for(o=2,n=0;n<x;n++)z=z<<1|1&o,A==l-1?(A=0,y.push(m(z)),z=0):A++,o=o>>1;for(;!0;)if(z=z<<1,A==l-1){y.push(m(z));break}else A++;return y.join("")},decompress:function decompress(k){return null==k?"":""==k?null:j._decompress(k.length,32768,function(l){return k.charCodeAt(l)})},_decompress:function _decompress(k,l,m){var o,u,v,x,y,z,A,B,n=[],p=4,q=4,r=3,s="",t=[],C={val:m(0),position:l,index:1};for(u=0;3>u;u+=1)n[u]=u;for(x=0,z=Math.pow(2,2),A=1;A!=z;)y=C.val&C.position,C.position>>=1,0==C.position&&(C.position=l,C.val=m(C.index++)),x|=(0<y?1:0)*A,A<<=1;switch(o=x){case 0:for(x=0,z=Math.pow(2,8),A=1;A!=z;)y=C.val&C.position,C.position>>=1,0==C.position&&(C.position=l,C.val=m(C.index++)),x|=(0<y?1:0)*A,A<<=1;B=d(x);break;case 1:for(x=0,z=Math.pow(2,16),A=1;A!=z;)y=C.val&C.position,C.position>>=1,0==C.position&&(C.position=l,C.val=m(C.index++)),x|=(0<y?1:0)*A,A<<=1;B=d(x);break;case 2:return"";}for(n[3]=B,v=B,t.push(B);!0;){if(C.index>k)return"";for(x=0,z=Math.pow(2,r),A=1;A!=z;)y=C.val&C.position,C.position>>=1,0==C.position&&(C.position=l,C.val=m(C.index++)),x|=(0<y?1:0)*A,A<<=1;switch(B=x){case 0:for(x=0,z=Math.pow(2,8),A=1;A!=z;)y=C.val&C.position,C.position>>=1,0==C.position&&(C.position=l,C.val=m(C.index++)),x|=(0<y?1:0)*A,A<<=1;n[q++]=d(x),B=q-1,p--;break;case 1:for(x=0,z=Math.pow(2,16),A=1;A!=z;)y=C.val&C.position,C.position>>=1,0==C.position&&(C.position=l,C.val=m(C.index++)),x|=(0<y?1:0)*A,A<<=1;n[q++]=d(x),B=q-1,p--;break;case 2:return t.join("");}if(0==p&&(p=Math.pow(2,r),r++),n[B])s=n[B];else if(B===q)s=v+v.charAt(0);else return null;t.push(s),n[q++]=v+s.charAt(0),p--,v=s,0==p&&(p=Math.pow(2,r),r++)}}};return j}();module.exports=LZString;

},{}]},{},[1,15,16,17,18,19,20,2,3,4,5,6,7,8,9,10,11,12,13,14]);
